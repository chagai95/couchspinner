{"version":3,"sources":["sofa.svg","trustroots-tree.svg","utils.js","About.js","Intro.js","AboutMe.js","Friends.js","Images.js","Raw.js","Profile.js","App.js","constants.js","index.js","components.js"],"names":["module","exports","formatDate","date","dateString","replace","formattedDate","Date","toLocaleDateString","undefined","year","month","day","scrollToElementById","event","stopPropagation","preventDefault","hash","target","el","document","getElementById","window","history","pushState","scrollIntoView","behavior","testStorage","type","storage","x","setItem","removeItem","e","DOMException","code","name","length","FaqHeading","children","id","className","href","onClick","title","About","isDragActive","input","role","aria-hidden","Intro","src","sofa","alt","AboutMe","user","interests","profile","about_me","dangerouslySetInnerHTML","__html","marked","map","interest","key","media","teach","amazing_thing","surf_reason","offer_hosts","TrustrootsSearch","search","label","rel","FriendList","list","classnames","displayName","username","Friends","friends","names","friendIds","friend","parseInt","has","get","unknownFriends","filter","knownFriends","Images","images","blobUrl","download","Raw","json","data","Messages","lazy","References","Profile","fileDate","user_data","references","messages","routes","route","count","written_references","received_references","first_name","last_name","occupation","sessionStorage","clear","error","Sentry","console","exact","path","fallback","userId","TrustrootsTree","getJsonFromZip","zip","a","files","relativePath","zipEntry","dir","split","pop","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","getNamesFromJson","Map","collectName","visit","person","surfer","host","display_name","set","couch_visits","host_couch_visits","forEach","surfer_couch_visits","setCacheValue","value","readBlobFile","text","resolve","reject","fr","FileReader","onload","result","readAsText","scrollTop","body","documentElement","App","isStorageAvailable","cachedFileDate","cachedNames","cachedProfile","cachedProfileImages","getItem","loadFromCache","useState","setProfile","profileImages","setProfileImages","setNames","setFileDate","isProcessing","setIsProcessing","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","lastModifiedDate","toString","jsonProfile","useDropzone","getRootProps","getInputProps","dsn","ReactDOM","render","StrictMode","Section","Heading","Content","props","Loading","CsProfileLink","CsProfileName","append","Tabs","activeClassName","to"],"mappings":"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","file":"static/js/main.33b5ed8c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sofa.ba454e2c.svg\";","module.exports = __webpack_public_path__ + \"static/media/trustroots-tree.19b96bca.svg\";","/**\n * Give out pretty date\n *\n * @param  {String|Date object} date Date as a string or Date object\n * @return {String}\n */\nexport function formatDate(date) {\n  if (!date) {\n    return date;\n  }\n\n  let dateString;\n\n  // Dates on CS exports are in format \"2007-01-11 22:29:44 UTC\"\n  if (typeof date !== 'object') {\n    dateString = date.replace(' UTC', '');\n  }\n\n  const formattedDate = new Date(dateString).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n\n  return formattedDate && formattedDate !== 'Invalid Date'\n    ? formattedDate\n    : date;\n}\n\nexport const scrollToElementById = event => {\n  event.stopPropagation();\n  event.preventDefault();\n  const hash = event?.target?.hash;\n  if (hash) {\n    const el = document.getElementById(hash.replace('#', ''));\n    if (el) {\n      window.history.pushState({}, '', hash);\n      el.scrollIntoView({\n        behavior: 'smooth',\n      });\n    }\n  }\n};\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n  var storage;\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n","import React from 'react';\n\nimport { scrollToElementById } from './utils';\nimport './About.css';\n\nfunction FaqHeading({ children, id }) {\n  return (\n    <h3 id={id}>\n      <a\n        className=\"Anchor\"\n        href={`#${id}`}\n        onClick={scrollToElementById}\n        title=\"Link here\"\n      >\n        #\n      </a>\n      {children}\n    </h3>\n  );\n}\n\nfunction About({ isDragActive, input }) {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\">\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <FaqHeading id=\"how-can-i-export-my-couchsurfing-profile\">\n          How can I export my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          If you can still access your profile,{' '}\n          <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">\n            follow these instructions to download your data\n          </a>\n          .\n        </p>\n        <p>\n          If you cannot access your profile, you can ask for a copy of your data\n          and to delete your account by contacting Couchsurfing Support at{' '}\n          <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a>{' '}\n          or through{' '}\n          <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>\n          .\n        </p>\n\n        <FaqHeading id=\"why-couchspinner-exists\">\n          Why CouchSpinner exists?\n        </FaqHeading>\n        <p>\n          CouchSurfing locked out a significant portion of their community by{' '}\n          <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">\n            turning into a paid site overnight\n          </a>{' '}\n          on May 14, 2020.\n        </p>\n        <p>\n          You can recover your data from CouchSurfing, but what can you do with\n          it then?\n        </p>\n        <p>\n          With CouchSpinner, you can preview your profile, references, and\n          messages again!\n        </p>\n\n        <FaqHeading id=\"who-made-this\">Who made this?</FaqHeading>\n        <p>\n          Folks behind{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots.org\n          </a>\n          , a free and community ran hospitality exchange site you can use\n          instead of CouchSurfing.\n        </p>\n        <p>\n          We built the functionality anyway for Trustroots and wanted to give it\n          away for everyone.\n        </p>\n        <p>\n          We'd love it if you would also join Trustroots, of course!{' '}\n          <span role=\"img\" aria-hidden>\n            🙂\n          </span>\n        </p>\n\n        <FaqHeading id=\"do-you-store-my-couchsurfing-profile\">\n          Do you store my CouchSurfing profile?{' '}\n        </FaqHeading>\n        <p>\n          Nope. Your profile is never uploaded to us — we never see it.\n          Everything happens in your browser only. This is completely secure.\n        </p>\n\n        <FaqHeading id=\"it-did-not-work\">It didn't work!</FaqHeading>\n        <p>\n          Oh no!{' '}\n          <a href=\"https://couchspinner.wordpress.com/\">Please get in touch</a>{' '}\n          with Mikael to see if we can help.\n        </p>\n\n        <FaqHeading id=\"couchsurfing-alternatives\">\n          What are other alternatives to CouchSurfing?\n        </FaqHeading>\n        <p>\n          You could check{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=faq\">\n            Trustroots\n          </a>\n          , <a href=\"https://www.bewelcome.org/\">BeWelcome</a>,{' '}\n          <a href=\"https://www.warmshowers.org/\">Warmshowers</a> and{' '}\n          <a href=\"https://hackercouch.com/\">Hackercouch</a>.\n        </p>\n\n        <FaqHeading id=\"i-see-only-some-names\">\n          I see only some names, but not everyone?\n        </FaqHeading>\n        <p>\n          Most of the Couchsurfing export doesn't contain names of other\n          profiles, only user IDs. There are a few names available from \"couch\n          requests\", which then we can show elsewhere too.\n        </p>\n\n        <FaqHeading id=\"not-all-my-data-is-here\">\n          Not all my data is here!\n        </FaqHeading>\n        <p>\n          Could be! Please check the \"raw\" tab of your profile to browser what\n          the file actually contains and what we are showing.\n        </p>\n        <p>\n          The preview doesn't show everything, but also the file from\n          CouchSurfing could be only partial. They've elaborated that{' '}\n          <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">\n            some of the very old data might've been lost\n          </a>\n          . You should reach out to CouchSurfing for any specifics, though.\n        </p>\n\n        <FaqHeading id=\"is-this-open-source\">Is this open-source?</FaqHeading>\n        <p>\n          <a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free\n          to help out.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default About;\n","import React from 'react';\n\nimport './Intro.scss';\nimport { scrollToElementById } from './utils';\nimport sofa from './sofa.svg';\n\nfunction Intro() {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>\n        Preview Couchsurfing profile export files.{' '}\n        <a href=\"#about\" onClick={scrollToElementById}>\n          Read more…\n        </a>\n      </h2>\n      {/* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */}\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <button className=\"Intro-instructions\">\n        Drop the file here,\n        <br />\n        or click to select it.\n      </button>\n      <p>\n        <a\n          href=\"#how-can-i-export-my-couchsurfing-profile\"\n          onClick={scrollToElementById}\n        >\n          How do I get CouchSurfing profile export file?\n        </a>\n        <br />\n        <br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={event => event.stopPropagation()}\n          href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=intro\"\n        >\n          By <span>Trustroots.org</span>\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default Intro;\n","import marked from 'marked';\nimport React from 'react';\n\nimport { Section, Heading, Content } from './components';\nimport './AboutMe.scss';\n\nfunction AboutMe({ user, interests }) {\n  return (\n    <Section>\n      <Heading>About me</Heading>\n      <Content>\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.interests && (\n          <>\n            <p>\n              <strong>More about my interests</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.interests),\n              }}\n            />\n            {interests?.interests && (\n              <ul className=\"AboutMe-interests\">\n                {interests.interests.map(interest => (\n                  <li key={interest.name}>{interest.name}</li>\n                ))}\n              </ul>\n            )}\n          </>\n        )}\n        {user?.profile?.media && (\n          <>\n            <p>\n              <strong>My Favorite Music, Movies & Books</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.media) }}\n            />\n          </>\n        )}\n        {user?.profile?.teach && (\n          <>\n            <p>\n              <strong>Teach, Learn, Share</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.teach) }}\n            />\n          </>\n        )}\n        {user?.profile?.amazing_thing && (\n          <>\n            <p>\n              <strong>One Amazing Thing I've Done</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.amazing_thing),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.surf_reason && (\n          <>\n            <p>\n              <strong>Why I'm on Couchsurfing</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.surf_reason),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.offer_hosts && (\n          <>\n            <p>\n              <strong>What I Can Share With Hosts</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.offer_hosts),\n              }}\n            />\n          </>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { Section, Heading, Content, CsProfileLink } from './components';\nimport './Friends.scss';\n\nfunction TrustrootsSearch({ search, label }) {\n  return (\n    search && (\n      <a\n        href={`https://www.trustroots.org/search/members?ref=couchspinner&ref-location=friends&search=${search}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {label}\n      </a>\n    )\n  );\n}\n\nfunction FriendList({ className, list }) {\n  return (\n    <ul className={classnames('Friendist', className)}>\n      {list.map(({ id, displayName, username }) => {\n        return (\n          <li key={id}>\n            <strong>\n              <CsProfileLink id={id}>\n                {displayName || username || `Member ${id}`}\n                {username && ` (${username})`}\n              </CsProfileLink>\n            </strong>\n            {(displayName || username) && (\n              <span className=\"Friendlist-tr no-print\">\n                Search on Trustroots{' '}\n                {displayName && (\n                  <TrustrootsSearch search={displayName} label=\"by name\" />\n                )}\n                {displayName && username && ' or '}\n                {username && (\n                  <TrustrootsSearch search={username} label=\"by username\" />\n                )}\n                .\n              </span>\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nfunction Friends({ friends, names }) {\n  const friendIds = friends.map(friend => {\n    const id = parseInt(\n      friend.profile.replace('https://www.couchsurfing.com/users/', ''),\n      10,\n    );\n    const { displayName, username } = names.has(id) ? names.get(id) : {};\n    return {\n      displayName,\n      id,\n      username,\n    };\n  });\n\n  const unknownFriends = friendIds.filter(({ displayName }) => !displayName);\n  const knownFriends = friendIds.filter(({ displayName }) => displayName);\n\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        {!friendIds.length === 0 && <p>No friends. :-(</p>}\n        {knownFriends.length > 0 && (\n          <>\n            <h3>Known friends</h3>\n            <p>\n              We had their names from your couch requests.{' '}\n              <span className=\"no-print\">\n                You should look them up on Trustroots!\n              </span>\n            </p>\n            <FriendList className=\"Friendlist-known\" list={knownFriends} />\n          </>\n        )}\n        {unknownFriends.length > 0 && (\n          <>\n            <h3>Unknown friends</h3>\n            <p>\n              Your export file does not have names for these members.{' '}\n              <span className=\"no-print\">\n                Some of their profiles might be public so you could try see whom\n                they are.\n              </span>\n            </p>\n            <FriendList className=\"Friendlist-unknown\" list={unknownFriends} />\n          </>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Friends;\n","import React from 'react';\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({ images }) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {images.length ? (\n          images.map(({ id, blobUrl }) => (\n            <p key={id}>\n              <a href={blobUrl} download={id}>\n                <img src={blobUrl} alt=\"\" className=\"Image\" />\n              </a>\n            </p>\n          ))\n        ) : (\n          <p>You had no images… :-(</p>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React from 'react';\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({ json }) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport React, { Suspense, lazy } from 'react';\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs, Loading } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Raw from './Raw';\nimport TrustrootsTree from './trustroots-tree.svg';\n\n// Slow rendering elements\nconst Messages = lazy(() => import('./Messages'));\nconst References = lazy(() => import('./References'));\n\nfunction Profile({ fileDate, images, names, profile }) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount =\n    (references?.written_references?.length ?? 0) +\n    (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' },\n  ];\n\n  const clearSessionStorage = () => {\n    try {\n      window.sessionStorage.clear();\n    } catch (error) {\n      Sentry.captureException(error);\n      console.error(error);\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <div>\n            <em>\n              <CsProfileLink id={user?.id}>\n                Your Couchsurfing.com profile\n              </CsProfileLink>\n              {fileDate && ` as of ${formatDate(fileDate)}`}\n            </em>\n            <h1>\n              {user?.profile?.first_name && `${user.profile.first_name} `}\n              {user?.profile?.last_name && `${user.profile.last_name} `}\n              {user?.username && `(${user.username})`}\n            </h1>\n            {user?.profile?.occupation && <h3>{user.profile.occupation}</h3>}\n          </div>\n          <div className=\"Profile-buttons\">\n            <a href=\"/\" className=\"Profile-clear\" onClick={clearSessionStorage}>\n              Clear out the profile\n            </a>\n            <a\n              href=\"https://www.trustroots.org/signup?ref=couchspinner&ref-location=header\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Sign up Trustroots.org\n            </a>\n          </div>\n        </div>\n\n        <Section>\n          <Tabs routes={routes} />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={user} interests={interests} />\n          </Route>\n          <Route path=\"/references\">\n            <Suspense fallback={<Loading>References</Loading>}>\n              <References\n                names={names}\n                references={references}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/friends\">\n            <Friends names={names} friends={friends?.friends || []} />\n          </Route>\n          <Route path=\"/messages\">\n            <Suspense fallback={<Loading>Messages</Loading>}>\n              <Messages\n                messages={messages?.messages || []}\n                names={names}\n                userId={user?.id}\n              />\n            </Suspense>\n          </Route>\n          <Route path=\"/images\">\n            <Images images={images} />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={profile} />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a\n            href=\"https://www.trustroots.org/?ref=couchspinner&ref-location=footer\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" />\n            <br />\n            Join Trustroots.org\n            <br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","import { useDropzone } from 'react-dropzone';\nimport * as Sentry from '@sentry/browser';\nimport classnames from 'classnames';\nimport jszip from 'jszip';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = '';\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch (error) {\n    Sentry.captureException(error);\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return (\n      !zipEntry.dir &&\n      ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop())\n    );\n  });\n\n  const imageProcessor = files.map(async file => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    images,\n    json,\n  };\n}\n\nfunction getNamesFromJson(json) {\n  const names = new Map();\n\n  const collectName = visit => {\n    const person = visit?.surfer || visit?.host || {};\n    const username = person?.username;\n    const id = person?.profile?.id;\n    const displayName = person?.profile?.display_name;\n    names.set(id, { displayName, username });\n  };\n\n  if (json?.couch_visits?.host_couch_visits) {\n    json.couch_visits.host_couch_visits.forEach(collectName);\n  }\n\n  if (json?.couch_visits?.surfer_couch_visits) {\n    json.couch_visits.surfer_couch_visits.forEach(collectName);\n  }\n\n  return names;\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(`Saving ${key} in cache failed:`, error);\n  }\n}\n\n/**\n * Read file from Blob or File entry\n * @param  {[File|Blob]}\n * @return {[String]} Text contents of the File\n */\nfunction readBlobFile(file) {\n  // Browser supports Blob.text(), all good!\n  // https://developer.mozilla.org/en-US/docs/Web/API/Blob/text\n  if (typeof file.text === 'function') {\n    return file.text();\n  }\n\n  // Namely Safari needs this\n  // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsText\n  // https://stackoverflow.com/a/46568146\n  return new Promise((resolve, reject) => {\n    var fr = new FileReader();\n    fr.onload = () => {\n      resolve(fr.result);\n    };\n    fr.readAsText(file);\n  });\n}\n\n/**\n * Load previously cached items\n * @return {[Object]}\n */\nfunction loadFromCache() {\n  let cachedFileDate;\n  let cachedNames;\n  let cachedProfile;\n  let cachedProfileImages;\n  try {\n    cachedFileDate = window.sessionStorage.getItem(\n      `${STORAGE_PREFIX}_file_date`,\n    );\n    cachedProfile = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`),\n    );\n    cachedProfileImages = JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`),\n    );\n\n    if (cachedProfile) {\n      cachedNames = getNamesFromJson(cachedProfile);\n    }\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error(error);\n  }\n\n  return {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  };\n}\n\nfunction scrollTop() {\n  document.body.scrollTop = 0; // For Safari\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  const {\n    cachedFileDate,\n    cachedNames,\n    cachedProfile,\n    cachedProfileImages,\n  } = isStorageAvailable ? loadFromCache() : {};\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [names, setNames] = useState(cachedNames || new Map());\n  const [fileDate, setFileDate] = useState(cachedFileDate || '');\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Store for the browser session — gets cleared out when closing tab but not on page refresh\n  useEffect(() => {\n    if (isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (!acceptedFiles || acceptedFiles.length === 0) {\n      setIsProcessing(false);\n      return alert('No files? 😥');\n    }\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert(\n        'Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n      );\n    }\n\n    if (file.lastModifiedDate) {\n      setFileDate(file.lastModifiedDate.toString());\n    }\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      if (!json) {\n        setIsProcessing(false);\n        return alert(\n          'Please drop a zip file which contains the profile json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n        );\n      }\n\n      const names = getNamesFromJson(json);\n      setProfile(json);\n      setNames(names);\n      setProfileImages(images);\n      scrollTop();\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await readBlobFile(file);\n\n      try {\n        const json = JSON.parse(jsonProfile);\n        const names = getNamesFromJson(json);\n        setProfile(json);\n        setNames(names);\n        scrollTop();\n      } catch (error) {\n        Sentry.captureException(error);\n        console.error(error);\n        alert(\n          'File is little too funky for us to understand…  😥\\n\\nMake sure you uploaded correct export file (it should be .json or .zip file).\\n\\nIf problem persists, feel free to get in touch with Mikael (https://mikaelkorpela.fi/#contact).',\n        );\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div className={classnames('App', { 'is-processing': isProcessing })}>\n      {profile ? (\n        <Profile\n          fileDate={fileDate}\n          images={profileImages}\n          names={names}\n          profile={profile}\n        />\n      ) : (\n        <>\n          <div\n            className={classnames('drop-container', {\n              'is-dropping': isDragActive,\n            })}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            <Intro />\n          </div>\n          <About />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/browser';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// JavaScript error logging\nSentry.init({\n  dsn:\n    'https://dace55ddccfc480083c04f2a876322a3@o356100.ingest.sentry.io/5288459',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport './components.scss';\n\nexport function Section({ children }) {\n  return <div className=\"Section\">{children}</div>;\n}\n\nexport function Heading({ children }) {\n  return <div className=\"Section-heading\">{children}</div>;\n}\n\nexport function Content(props) {\n  return (\n    <div className=\"Section-content\" {...props}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function Loading({ children }) {\n  return (\n    <Section>\n      <Heading>{children || <span className=\"placeholder\"></span>}</Heading>\n      <Content>\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n        <br />\n        <span className=\"placeholder\"></span>\n      </Content>\n    </Section>\n  );\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children || 'Member';\n  return !!props.id ? (\n    <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n      {props.id === props.userId ? 'You' : label}\n    </a>\n  ) : (\n    <span {...props}>{label}</span>\n  );\n}\n\nexport function CsProfileName(props) {\n  const { id, names, alt, append } = props;\n  const displayName = names ? names.get(id)?.displayName : false;\n\n  return (\n    <>\n      <CsProfileLink id={id} {...props}>\n        {displayName || alt}\n      </CsProfileLink>\n      {displayName && append}\n    </>\n  );\n}\n\nexport function Tabs({ routes }) {\n  return (\n    <ul className=\"Tabs\">\n      {routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={route}>\n            {label}\n            {!!count && <span className=\"Tab-count\">{count}</span>}\n          </NavLink>\n        </li>\n      ))}\n    </ul>\n  );\n}\n"],"sourceRoot":""}