(this.webpackJsonpcouchspinner=this.webpackJsonpcouchspinner||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(81),o=n.n(l),c=(n(94),n(9)),i=n.n(c),s=n(19),u=n(26),m=n(88),p=n(83),f=n.n(p),d=n(58),h=n.n(d),v=(n(105),n(25));n(106);function E(e){var t=e.children;return r.a.createElement("div",{className:"Section"},t)}function g(e){var t=e.children;return r.a.createElement("div",{className:"Section-heading"},t)}function b(e){return r.a.createElement("div",Object.assign({className:"Section-content"},e),e.children)}function w(e){var t=e.children?e.children:"Member";return e.id?r.a.createElement("a",Object.assign({},e,{href:"https://www.couchsurfing.com/users/".concat(e.id)}),e.id===e.userId?"You":t):r.a.createElement("span",e,t)}function y(e){var t=e.id;return r.a.createElement("a",{className:"Anchor",href:"#".concat(t),id:t,title:"Link here"},"#")}function _(e){var t=e.routes;return r.a.createElement("ul",{className:"Tabs"},t.map((function(e){var t=e.route,n=e.label,a=e.count;return r.a.createElement("li",{key:t},r.a.createElement(v.b,{activeClassName:"is-active",to:t},n,!!a&&r.a.createElement("span",{className:"Tab-count"},a)))})))}n(109);var S=Object(a.forwardRef)((function(e,t){e.isDragActive,e.input,e.aboutRef;return r.a.createElement("div",{className:"App-landing-section About",id:"about",ref:t},r.a.createElement("h1",null,"About"),r.a.createElement("div",{className:"About-FAQ"},r.a.createElement("h3",null,"Why CouchSpinner exists? ",r.a.createElement(y,{id:"why-couchspinner-exists"})),r.a.createElement("p",null,"CouchSurfing locked out a significant portion of their community by ",r.a.createElement("a",{href:"https://blog.couchsurfing.com/couchsurfing-needs-your-help/"},"turning into a paid site overnight")," on May 14, 2020."),r.a.createElement("p",null,"You can recover your data from CouchSurfing, but what can you do with it then?"),r.a.createElement("p",null,"With CouchSpinner, you can preview your profile, references, and messages again!"),r.a.createElement("h3",null,"How can I export my CouchSurfing profile? ",r.a.createElement(y,{id:"how-can-i-export-my-couchsurfing-profile"})),r.a.createElement("p",null,"If you can still access your profile, ",r.a.createElement("a",{href:"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data"},"follow these instructions to download your data"),"."),r.a.createElement("p",null,"If you cannot access your profile, you can ask for a copy of your data and to delete your account by contacting Couchsurfing Support at ",r.a.createElement("a",{href:"mailto:support@couchsurfing.com"},"support@couchsurfing.com")," or through ",r.a.createElement("a",{href:"mailto:privacy@couchsurfing.com"},"privacy@couchsurfing.com"),"."),r.a.createElement("h3",null,"Do you store my CouchSurfing profile? ",r.a.createElement(y,{id:"do-you-store-my-couchsurfing-profile"})),r.a.createElement("p",null,"Nope. Your profile is never uploaded to us \u2014 we never see it. Everything happens in your browser only. This is completely secure."),r.a.createElement("h3",null,"Who made this? ",r.a.createElement(y,{id:"who-made-this"})),r.a.createElement("p",null,"Folks behind ",r.a.createElement("a",{href:"https://www.trustroots.org/?ref=couchspinner"},"Trustroots.org"),", a free and community ran hospitality exchange site alternative to CouchSurfing."),r.a.createElement("p",null,"We built the functionality anyway for Trustroots and wanted to give it away for people who don't want to join Trustroots."),r.a.createElement("p",null,"We'd love it if you considered joining Trustroots, though! ",r.a.createElement("span",{role:"img","aria-hidden":!0},"\ud83d\ude42")),r.a.createElement("h3",null,"What are other alternatives to CouchSurfing? ",r.a.createElement(y,{id:"couchsurfing-alternatives"})),r.a.createElement("p",null,"You could check ",r.a.createElement("a",{href:"https://www.trustroots.org/?ref=couchspinner"},"Trustroots"),", ",r.a.createElement("a",{href:"https://www.bewelcome.org/"},"BeWelcome"),", ",r.a.createElement("a",{href:"https://www.warmshowers.org/"},"Warmshowers")," and ",r.a.createElement("a",{href:"https://hackercouch.com/"},"Hackercouch"),"."),r.a.createElement("h3",null,"Not all my data is here! ",r.a.createElement(y,{id:"not-all-my-data-is-here"})),r.a.createElement("p",null,'Could be! Please check the "raw" tab of your profile to browser what the file actually contains and what we are showing.'),r.a.createElement("p",null,"The preview doesn't show everything, but also the file from CouchSurfing could be only partial. They've elaborated that ",r.a.createElement("a",{href:"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382"},"some of the very old data might've been lost"),". You should reach out to CouchSurfing for any specifics, though."),r.a.createElement("h3",null,"Is this open-source? ",r.a.createElement(y,{id:"is-this-open-source"})),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/simison/couchspinner"},"Yep!")," Feel free to help out.")))}));n(110);function N(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var I=n(85),k=n.n(I),x=function(e){e.stopPropagation()};var j=function(e){var t=e.aboutRef;return r.a.createElement("div",{className:"App-landing-section Intro"},r.a.createElement("h1",null,"CouchSpinner"),r.a.createElement("h2",null,"Preview Couchsurfing profile exports"),r.a.createElement("img",{src:k.a,className:"Intro-logo",alt:"logo"}),r.a.createElement("div",{className:"Intro-instructions"},r.a.createElement("p",null,"Drop the export file here, or click to select it.")),r.a.createElement("p",null,r.a.createElement("a",{href:"#about",onClick:function(e){x(e),e.preventDefault(),t.current.scrollIntoView({behavior:"smooth"})}},"Read more"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{className:"Intro-by-link",onClick:x,href:"https://www.trustroots.org/?ref=couchspinner"},"By Trustroots")))},O=n(2),T=(n(111),n(4)),M=n.n(T);n(112);var C=function(e){var t,n,a,l,o,c,i,s,u=e.user,m=e.interests;return r.a.createElement(E,null,r.a.createElement(g,null,"About me"),r.a.createElement(b,null,(null===u||void 0===u||null===(t=u.profile)||void 0===t?void 0:t.about_me)&&r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.about_me)}}),(null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.about_me)&&r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.about_me)}}),(null===u||void 0===u||null===(a=u.profile)||void 0===a?void 0:a.interests)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"More about my interests")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.interests)}}),(null===m||void 0===m?void 0:m.interests)&&r.a.createElement("ul",{className:"AboutMe-interests"},m.interests.map((function(e){return r.a.createElement("li",{key:e.name},e.name)})))),(null===u||void 0===u||null===(l=u.profile)||void 0===l?void 0:l.media)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"My Favorite Music, Movies & Books")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.media)}})),(null===u||void 0===u||null===(o=u.profile)||void 0===o?void 0:o.teach)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Teach, Learn, Share")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.teach)}})),(null===u||void 0===u||null===(c=u.profile)||void 0===c?void 0:c.amazing_thing)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"One Amazing Thing I've Done")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.amazing_thing)}})),(null===u||void 0===u||null===(i=u.profile)||void 0===i?void 0:i.surf_reason)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Why I'm on Couchsurfing")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.surf_reason)}})),(null===u||void 0===u||null===(s=u.profile)||void 0===s?void 0:s.offer_hosts)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"What I Can Share With Hosts")),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(u.profile.offer_hosts)}}))))};var R=function(e){var t=e.friends;return r.a.createElement(E,null,r.a.createElement(g,null,"Friends"),r.a.createElement(b,null,t.length?r.a.createElement("ul",null,t.map((function(e){var t=parseInt(e.profile.replace("https://www.couchsurfing.com/users/",""),10);return r.a.createElement("li",{key:t},r.a.createElement(w,{id:t},e.profile))}))):"No friends. :-("))};n(113);var F=function(e){var t=e.images;return r.a.createElement(E,null,r.a.createElement(g,null,"Images"),r.a.createElement(b,null,t.length?t.map((function(e){var t=e.id,n=e.blobUrl;return r.a.createElement("p",{key:t},r.a.createElement("a",{href:n,download:t},r.a.createElement("img",{src:n,alt:"",className:"Image"})))})):r.a.createElement("p",null,"You had no images... :-(")))};n(114);var L=function(e){var t=e.messages,n=e.userId,l=Object(a.useState)(!1),o=Object(s.a)(l,2),c=o[0],i=o[1];return r.a.createElement(E,null,r.a.createElement(g,null,"Messages"),r.a.createElement(b,null,t.length?t.map((function(e){var t;console.log(e);var a=e.user_ids_concatenated.split(",").filter((function(e){return e!==n})),l="".concat(null===e||void 0===e?void 0:e.user_ids_concatenated,"-").concat(null===e||void 0===e?void 0:e.created_at),o=!!e.messages.length,s=c===l,u=null===(t=e.messages.pop())||void 0===t?void 0:t.body;return r.a.createElement("div",{className:"Message",key:l},r.a.createElement("div",{className:"Message-meta"},a.map((function(e){return r.a.createElement(w,{id:e,key:e})})),(null===e||void 0===e?void 0:e.updated_at)&&r.a.createElement("span",{className:"Message-date"},N(e.updated_at))),o&&s&&r.a.createElement("div",{className:"Message-thread",dangerouslySetInnerHTML:{__html:M()(u)}}),o&&!s&&r.a.createElement(r.a.Fragment,null,u&&r.a.createElement("div",{className:"Message-preview",dangerouslySetInnerHTML:{__html:M()(u)}}),r.a.createElement("button",{className:"Message-read",onClick:i(l)},"Read all")),!o&&r.a.createElement("p",{className:"Message-thread"},"Empty message."))})):"No messages. :-("))},P=n(86),A=n.n(P);var D=function(e){var t=e.json;return r.a.createElement(E,null,r.a.createElement(g,null,"Raw profile export"),r.a.createElement(A.a,{data:t}))};n(219);function H(e,t){return e&&0!==e.length?e.filter((function(e){return e.experience===t})).length:0}function W(e){var t=e.list,n=e.userId;return t.map((function(e){var t=e.body,a=e.created_at,l=e.creator_id,o=e.experience,c=e.recipient_id,i=e.reference_type,s=e.response_body,u=e.response_created_at,m=l===n,p=m?c:l;return r.a.createElement("div",{className:"Profile-reference",key:"".concat(l,"-").concat(c,"-").concat(a)},r.a.createElement("p",{className:"Profile-reference-meta"},i&&r.a.createElement(w,{className:"Profile-reference-type",id:p},function(e,t){switch(e){case"surf":return t?"To surfer":"From surfer";case"host":return t?"To host":"From host";default:return t?"To member":"From member"}}(i,m)),o&&r.a.createElement("strong",{className:"Profile-reference-experience Profile-reference-experience-".concat(o)},"\u2605 ",o),a&&r.a.createElement("span",{className:"Profile-reference-date"},N(a))),t&&r.a.createElement("p",null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(t)}})),s&&r.a.createElement("div",{className:"Profile-reference-response"},r.a.createElement("p",null,r.a.createElement("strong",null,"Response"),u&&r.a.createElement("span",{className:"Profile-reference-date"}," ".concat(N(u)))),r.a.createElement("p",null,r.a.createElement("span",{dangerouslySetInnerHTML:{__html:M()(s)}}))))}))}var J=function(e){var t,n,a,l,o=e.references,c=e.userId;return r.a.createElement(v.a,null,r.a.createElement(E,null,r.a.createElement(g,null,"References"),r.a.createElement(b,null,r.a.createElement("p",null,(null===o||void 0===o||null===(t=o.written_references)||void 0===t?void 0:t.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"".concat(o.written_references.length," written: ")),"".concat(H(o.written_references,"positive")," positive, "),"".concat(H(o.written_references,"neutral")," neutral, and "),"".concat(H(o.written_references,"negative")," negative.")):"You didn't write references"),r.a.createElement("p",null,(null===o||void 0===o||null===(n=o.received_references)||void 0===n?void 0:n.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"".concat(o.received_references.length," received: ")),"".concat(H(o.received_references,"positive")," positive, "),"".concat(H(o.received_references,"neutral")," neutral, and "),"".concat(H(o.received_references,"negative")," negative.")):"You didn't receive references"),r.a.createElement(_,{routes:[{route:"/references",label:"Received references"},{route:"/references/written",label:"Written references"}]}),r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/references"},r.a.createElement("h3",null,"Received references"),r.a.createElement(W,{userId:c,list:null!==(a=null===o||void 0===o?void 0:o.received_references)&&void 0!==a?a:[]})),r.a.createElement(O.a,{path:"/references/written"},r.a.createElement("h3",null,"Written references"),r.a.createElement(W,{userId:c,list:null!==(l=null===o||void 0===o?void 0:o.written_references)&&void 0!==l?l:[]}))))))},Y=n(87),z=n.n(Y);var U=function(e){var t,n,a,l,o,c,i,s,u,m,p=e.profile,f=e.images,d=e.fileDate,h=p.user_data,g=p.interests,b=p.references,y=p.friends,S=p.messages,I=[{route:"/",label:"About me"},{route:"/references",label:"References",count:(null!==(t=null===b||void 0===b||null===(n=b.written_references)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(a=null===b||void 0===b||null===(l=b.received_references)||void 0===l?void 0:l.length)&&void 0!==a?a:0)},{route:"/friends",label:"Friends",count:null!==(o=null===y||void 0===y||null===(c=y.friends)||void 0===c?void 0:c.length)&&void 0!==o?o:0},{route:"/images",label:"Images",count:null!==(i=null===f||void 0===f?void 0:f.length)&&void 0!==i?i:0},{route:"/raw",label:"Raw"}];return r.a.createElement(v.a,null,r.a.createElement("div",{className:"Profile"},r.a.createElement("div",{className:"Profile-header"},r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement(w,{id:null===h||void 0===h?void 0:h.id},"Your Couchsurfing.com profile"),d&&" as of ".concat(N(d))),r.a.createElement("a",{href:"/",className:"Profile-clear",onClick:function(){return window.sessionStorage.clear()}},"Clear out the profile")),r.a.createElement("h1",null,(null===h||void 0===h||null===(s=h.profile)||void 0===s?void 0:s.first_name)&&"".concat(h.profile.first_name," "),(null===h||void 0===h||null===(u=h.profile)||void 0===u?void 0:u.last_name)&&"".concat(h.profile.last_name," "),(null===h||void 0===h?void 0:h.username)&&"(".concat(h.username,")")),(null===h||void 0===h||null===(m=h.profile)||void 0===m?void 0:m.occupation)&&r.a.createElement("h3",null,h.profile.occupation)),r.a.createElement(E,null,r.a.createElement(_,{routes:I})),r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/"},r.a.createElement(C,{user:h,interests:g})),r.a.createElement(O.a,{path:"/references"},r.a.createElement(J,{references:b,userId:null===h||void 0===h?void 0:h.id})),r.a.createElement(O.a,{path:"/friends"},r.a.createElement(R,{friends:(null===y||void 0===y?void 0:y.friends)||[]})),r.a.createElement(O.a,{path:"/messages"},r.a.createElement(L,{messages:(null===S||void 0===S?void 0:S.messages)||[],userId:null===h||void 0===h?void 0:h.id})),r.a.createElement(O.a,{path:"/images"},r.a.createElement(F,{images:f})),r.a.createElement(O.a,{path:"/raw"},r.a.createElement(D,{json:p}))),r.a.createElement("div",{className:"promo"},r.a.createElement("a",{href:"https://www.trustroots.org/?ref=couchspinner",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:z.a,className:"tr-logo",alt:"Trustroots"}),r.a.createElement("br",null),"Join Trustroots.org",r.a.createElement("br",null),"Travellers hospitality community."))))};function B(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.filter((function(e,t){return!t.dir&&"json"===t.name.split(".").pop()}))).length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,t.file(n[0].name).async("string");case 5:return a=e.sent,e.prev=6,r=JSON.parse(a),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(6),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}function V(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter((function(e,t){return!t.dir&&["jpg","gif","png"].includes(t.name.split(".").pop())})),a=n.map(function(){var e=Object(u.a)(i.a.mark((function e(n){var a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.file(n.name).async("blob");case 2:return a=e.sent,r=window.URL||window.webkitURL,l=r.createObjectURL(a),e.abrupt("return",{blobUrl:l,id:n.name});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.loadAsync(t);case 2:return n=e.sent,e.next=5,B(n);case 5:return a=e.sent,e.next=8,V(n);case 8:return r=e.sent,e.abrupt("return",{json:a,images:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){try{window.sessionStorage.setItem("".concat("couchspinner","_").concat(e),t)}catch(n){console.error(n)}}var Z=function(){var e=function(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(a){return a instanceof DOMException&&(22===a.code||1014===a.code||"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&t&&0!==t.length}}("sessionStorage"),t=e&&window.sessionStorage.getItem("".concat("couchspinner","_file_date")),n=e&&JSON.parse(window.sessionStorage.getItem("".concat("couchspinner","_profile"))),l=e&&JSON.parse(window.sessionStorage.getItem("".concat("couchspinner","_profile_images"))),o=Object(a.useState)(n||!1),c=Object(s.a)(o,2),p=c[0],f=c[1],d=Object(a.useState)(l||[]),v=Object(s.a)(d,2),E=v[0],g=v[1],b=Object(a.useState)(t||!1),w=Object(s.a)(b,2),y=w[0],_=w[1],N=Object(a.useState)(!1),I=Object(s.a)(N,2),k=I[0],x=I[1],O=Object(a.createRef)();Object(a.useEffect)((function(){e&&(X("file_date",y),X("profile_images",JSON.stringify(E)),X("profile",JSON.stringify(p)))}),[e,p,E,y]);var T=Object(a.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,l,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),1===t.length){e.next=4;break}return x(!1),e.abrupt("return",alert("Just one file please."));case 4:if(n=t[0],["application/zip","application/json"].includes(n.type)){e.next=8;break}return x(!1),e.abrupt("return",alert('Please drop either the zip file or json file.\n\nE.g. "couchsurfing-export-123456-202005200751.zip", or "123456-202005200751.json"'));case 8:if(_(n.lastModifiedDate),"application/zip"!==n.type){e.next=19;break}return e.next=12,G(n);case 12:a=e.sent,r=a.json,l=a.images,f(r),g(l),e.next=24;break;case 19:if("application/json"!==n.type){e.next=24;break}return e.next=22,n.text();case 22:o=e.sent;try{c=JSON.parse(o),f(c)}catch(i){alert("File is little too funky for us to understand... \ud83d\ude25")}case 24:x(!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),M=Object(m.a)({onDrop:T}),C=M.getRootProps,R=M.getInputProps,F=M.isDragActive;return r.a.createElement("div",{className:h()("App",{"is-processing":k})},p?r.a.createElement(U,{profile:p,images:E,fileDate:y}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:h()("drop-container",{"is-dropping":F})},C()),r.a.createElement("input",R()),r.a.createElement(j,{aboutRef:O})),r.a.createElement(S,{ref:O})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root"))},85:function(e,t,n){e.exports=n.p+"static/media/sofa.ba454e2c.svg"},87:function(e,t,n){e.exports=n.p+"static/media/trustroots-tree.19b96bca.svg"},89:function(e,t,n){e.exports=n(220)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.43d8457a.chunk.js.map