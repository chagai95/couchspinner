(this.webpackJsonpcouchspinner=this.webpackJsonpcouchspinner||[]).push([[0],{203:function(e,n,t){},204:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),l=t(70),c=t.n(l),i=(t(81),t(11)),o=t.n(i),s=t(18),u=t(29),m=t(75),f=t(72),p=t.n(f),d=t(28),v=t.n(d),g=(t(92),t(73)),E=t.n(g);t(93);var h=function(e){var n=e.isDragActive,t=e.input;return a.a.createElement("div",{className:"Intro"},a.a.createElement("h1",null,"CouchSpinner"),a.a.createElement("img",{src:E.a,className:"Intro-logo",alt:"logo"}),t,n?a.a.createElement("p",null,"Drop the file here..."):a.a.createElement("p",null,"Drop the Couchsurfing profile file here, or click to select file."),a.a.createElement("p",null,"By ",a.a.createElement("a",{onClick:function(e){e.stopPropagation()},href:"https://www.trustroots.org/?ref=couchspinner"},"Trustroots")))};t(94),t(95);function _(e){var n=e.children;return a.a.createElement("div",{className:"Section"},n)}function b(e){var n=e.children;return a.a.createElement("div",{className:"Section-heading"},n)}function w(e){return a.a.createElement("div",Object.assign({className:"Section-content"},e),e.children)}function y(e){return e.id?a.a.createElement("a",Object.assign({},e,{href:"https://www.couchsurfing.com/users/".concat(e.id)}),e.children):a.a.createElement("span",e,e.children)}function j(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var x=t(3),k=t.n(x);t(96);function S(e,n){return e&&0!==e.length?e.filter((function(e){return e.experience===n})).length:0}var N=function(e){var n,t,r,l=e.references;return a.a.createElement(_,null,a.a.createElement(b,null,"References"),a.a.createElement(w,null,a.a.createElement("p",null,(null===l||void 0===l||null===(n=l.written_references)||void 0===n?void 0:n.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.written_references.length," written: ")),"".concat(S(l.written_references,"positive")," positive, "),"".concat(S(l.written_references,"neutral")," neutral, and "),"".concat(S(l.written_references,"negative")," negative.")):"You didn't write references"),a.a.createElement("p",null,(null===l||void 0===l||null===(t=l.received_references)||void 0===t?void 0:t.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.received_references.length," received: ")),"".concat(S(l.received_references,"positive")," positive, "),"".concat(S(l.received_references,"neutral")," neutral, and "),"".concat(S(l.received_references,"negative")," negative.")):"You didn't receive references"),(null===l||void 0===l||null===(r=l.received_references)||void 0===r?void 0:r.length)&&l.received_references.map((function(e){return a.a.createElement("div",{className:"Profile-reference",key:"".concat(e.creator_id,"-").concat(e.recipient_id,"-").concat(e.created_at)},a.a.createElement("p",{className:"Profile-reference-meta"},e.reference_type&&a.a.createElement(y,{className:"Profile-reference-type",id:e.creator_id},function(e){switch(e){case"surf":return"From Surfer";case"host":return"From host";default:return"Personal"}}(e.reference_type)),e.experience&&a.a.createElement("strong",{className:"Profile-reference-experience Profile-reference-experience-".concat(e.experience||"unknown")},"\u2605 ",e.experience||"unknown"),e.created_at&&a.a.createElement("span",{className:"Profile-reference-date"},j(e.created_at))),e.body&&a.a.createElement("p",null,a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(e.body)}})))}))))};t(97);var M=function(e){var n,t,r,l,c,i,o,s,u=e.user,m=e.interests;return a.a.createElement(_,null,a.a.createElement(b,null,"About me"),a.a.createElement(w,null,(null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.about_me)}}),(null===u||void 0===u||null===(t=u.profile)||void 0===t?void 0:t.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.about_me)}}),(null===u||void 0===u||null===(r=u.profile)||void 0===r?void 0:r.interests)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"More about my interests")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.interests)}}),(null===m||void 0===m?void 0:m.interests)&&a.a.createElement("ul",{className:"AboutMe-interests"},m.interests.map((function(e){return a.a.createElement("li",{key:e.name},e.name)})))),(null===u||void 0===u||null===(l=u.profile)||void 0===l?void 0:l.media)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"My Favorite Music, Movies & Books")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.media)}})),(null===u||void 0===u||null===(c=u.profile)||void 0===c?void 0:c.teach)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Teach, Learn, Share")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.teach)}})),(null===u||void 0===u||null===(i=u.profile)||void 0===i?void 0:i.amazing_thing)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"One Amazing Thing I've Done")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.amazing_thing)}})),(null===u||void 0===u||null===(o=u.profile)||void 0===o?void 0:o.surf_reason)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Why I'm on Couchsurfing")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.surf_reason)}})),(null===u||void 0===u||null===(s=u.profile)||void 0===s?void 0:s.offer_hosts)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"What I Can Share With Hosts")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:k()(u.profile.offer_hosts)}}))))};t(98);var O=function(e){var n=e.messages;return a.a.createElement(_,null,a.a.createElement(b,null,"Messages"),a.a.createElement(w,null,n.length?a.a.createElement("div",null,"Messages coming up..."):"No messages. :-("))};var I=function(e){var n=e.friends;return a.a.createElement(_,null,a.a.createElement(b,null,"Friends"),a.a.createElement(w,null,n.length?a.a.createElement("ul",null,n.map((function(e){var n=parseInt(e.profile.replace("https://www.couchsurfing.com/users/",""),10);return a.a.createElement("li",{key:n},a.a.createElement(y,{id:n},e.profile))}))):"No friends. :-("))},F=t(74),P=t.n(F);t(203);var D=function(e){var n=e.json;return a.a.createElement(_,null,a.a.createElement(b,null,"Raw profile export"),a.a.createElement(P.a,{data:n}))};var T=function(e){var n,t,l,c,i,o,u,m,f,p,d,g=e.profile,E=(e.images,e.fileDate),h=g.user_data,b=g.interests,w=g.references,x=g.friends,k=g.messages,S=Object(r.useState)("about-me"),F=Object(s.a)(S,2),P=F[0],T=F[1],L=(null!==(n=null===w||void 0===w||null===(t=w.written_references)||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(l=null===w||void 0===w||null===(c=w.received_references)||void 0===c?void 0:c.length)&&void 0!==l?l:0),H=null!==(i=null===x||void 0===x||null===(o=x.friends)||void 0===o?void 0:o.length)&&void 0!==i?i:0,A=null!==(u=null===k||void 0===k||null===(m=k.messages)||void 0===m?void 0:m.length)&&void 0!==u?u:0;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Profile"},a.a.createElement("div",{className:"Profile-header"},a.a.createElement("p",null,a.a.createElement("em",null,a.a.createElement(y,{id:null===h||void 0===h?void 0:h.id},"Your Couchsurfing.com profile"),E&&" as of ".concat(j(E)))),a.a.createElement("h1",null,(null===h||void 0===h||null===(f=h.profile)||void 0===f?void 0:f.first_name)&&"".concat(h.profile.first_name," "),(null===h||void 0===h||null===(p=h.profile)||void 0===p?void 0:p.last_name)&&"".concat(h.profile.last_name," "),(null===h||void 0===h?void 0:h.username)&&"(".concat(h.username,")")),(null===h||void 0===h||null===(d=h.profile)||void 0===d?void 0:d.occupation)&&a.a.createElement("h3",null,h.profile.occupation)),a.a.createElement(_,null,a.a.createElement("ul",{className:"Profile-tabs"},[{slug:"about-me",label:"About me"},{slug:"references",label:"References",count:L},{slug:"friends",label:"Friends",count:H},{slug:"messages",label:"Messages",count:A},{slug:"raw",label:"Raw"}].map((function(e){var n=e.slug,t=e.label,r=e.count;return a.a.createElement("li",{key:n},a.a.createElement("button",{className:v()({"is-active":n===P}),onClick:function(){return T(n)}},t,r&&a.a.createElement("span",{className:"Profile-tab-count"},r)))})))),"about-me"===P&&a.a.createElement(M,{user:h,interests:b}),"references"===P&&a.a.createElement(N,{references:w}),"friends"===P&&a.a.createElement(I,{friends:(null===x||void 0===x?void 0:x.friends)||[]}),"messages"===P&&a.a.createElement(O,{messages:(null===k||void 0===k?void 0:k.messages)||[]}),"raw"===P&&a.a.createElement(D,{json:g})))};function L(e){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(o.a.mark((function e(n){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.filter((function(e,n){return!n.dir&&"json"===n.name.split(".").pop()}))).length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.file(t[0].name).async("string");case 5:return r=e.sent,e.prev=6,a=JSON.parse(r),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(6),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}function A(e){e.filter((function(e,n){return!n.dir&&["jpg","gif","png"].includes(n.name.split(".").pop())}));return{}}function C(e){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(o.a.mark((function e(n){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.loadAsync(n);case 2:return t=e.sent,e.next=5,L(t);case 5:return r=e.sent,e.next=8,A(t);case 8:return a=e.sent,e.abrupt("return",{json:r,images:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(){var e=Object(r.useState)(!1),n=Object(s.a)(e,2),t=n[0],l=n[1],c=Object(r.useState)({}),i=Object(s.a)(c,2),f=i[0],p=i[1],d=Object(r.useState)(!1),g=Object(s.a)(d,2),E=g[0],_=g[1],b=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(n){var t,r,a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("acceptedFiles:",n),1===n.length){e.next=3;break}return e.abrupt("return",alert("Just one file please."));case 3:if(t=n[0],["application/zip","application/json"].includes(t.type)){e.next=6;break}return e.abrupt("return",alert('Please drop either the zip file or json file, e.g. "couchsurfing-export-123456-202005200751.zip", or "123456-202005200751.json"'));case 6:if(_(t.lastModifiedDate),"application/zip"!==t.type){e.next=17;break}return e.next=10,C(t);case 10:r=e.sent,a=r.json,c=r.images,l(a),p(c),e.next=22;break;case 17:if("application/json"!==t.type){e.next=22;break}return e.next=20,t.text();case 20:i=e.sent;try{s=JSON.parse(i),l(s)}catch(o){alert("File is little too funky for us to understand... \ud83d\ude25")}case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),w=Object(m.a)({onDrop:b}),y=w.getRootProps,j=w.getInputProps,x=w.isDragActive;return a.a.createElement("div",Object.assign({className:v()("App",{"is-dropping":x})},y()),t?a.a.createElement(T,{profile:t,images:f,fileDate:E}):a.a.createElement(h,{isDragActive:x,input:a.a.createElement("input",j())}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,n,t){e.exports=t.p+"static/media/sofa.ba454e2c.svg"},76:function(e,n,t){e.exports=t(204)},81:function(e,n,t){},92:function(e,n,t){},93:function(e,n,t){},94:function(e,n,t){},95:function(e,n,t){},96:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.fb49a112.chunk.js.map