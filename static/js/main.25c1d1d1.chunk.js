(this.webpackJsonpcouchspinner=this.webpackJsonpcouchspinner||[]).push([[0],{105:function(e,n,t){},106:function(e,n,t){},107:function(e,n,t){},108:function(e,n,t){},109:function(e,n,t){},110:function(e,n,t){},111:function(e,n,t){},216:function(e,n,t){},219:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),l=t(81),c=t.n(l),o=(t(94),t(18)),i=t.n(o),s=t(34),u=t(33),m=t(88),f=t(83),p=t.n(f),d=t(57),v=t.n(d),g=(t(105),t(84)),E=t.n(g);t(106);var h=function(e){var n=e.isDragActive,t=e.input;return a.a.createElement("div",{className:"Intro"},a.a.createElement("h1",null,"CouchSpinner"),a.a.createElement("img",{src:E.a,className:"Intro-logo",alt:"logo"}),t,n?a.a.createElement("p",null,"Drop the file here..."):a.a.createElement("p",null,"Drop the Couchsurfing profile file here, or click to select file."),a.a.createElement("p",null,"By ",a.a.createElement("a",{onClick:function(e){e.stopPropagation()},href:"https://www.trustroots.org/?ref=couchspinner"},"Trustroots")))},_=t(58),b=t(2);t(107),t(108);function w(e){var n=e.children;return a.a.createElement("div",{className:"Section"},n)}function y(e){var n=e.children;return a.a.createElement("div",{className:"Section-heading"},n)}function x(e){return a.a.createElement("div",Object.assign({className:"Section-content"},e),e.children)}function k(e){return e.id?a.a.createElement("a",Object.assign({},e,{href:"https://www.couchsurfing.com/users/".concat(e.id)}),e.children):a.a.createElement("span",e,e.children)}function j(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var N=t(8),S=t.n(N);t(109);function M(e,n){return e&&0!==e.length?e.filter((function(e){return e.experience===n})).length:0}var I=function(e){var n,t,r,l=e.references;return a.a.createElement(w,null,a.a.createElement(y,null,"References"),a.a.createElement(x,null,a.a.createElement("p",null,(null===l||void 0===l||null===(n=l.written_references)||void 0===n?void 0:n.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.written_references.length," written: ")),"".concat(M(l.written_references,"positive")," positive, "),"".concat(M(l.written_references,"neutral")," neutral, and "),"".concat(M(l.written_references,"negative")," negative.")):"You didn't write references"),a.a.createElement("p",null,(null===l||void 0===l||null===(t=l.received_references)||void 0===t?void 0:t.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.received_references.length," received: ")),"".concat(M(l.received_references,"positive")," positive, "),"".concat(M(l.received_references,"neutral")," neutral, and "),"".concat(M(l.received_references,"negative")," negative.")):"You didn't receive references"),(null===l||void 0===l||null===(r=l.received_references)||void 0===r?void 0:r.length)&&l.received_references.map((function(e){return a.a.createElement("div",{className:"Profile-reference",key:"".concat(e.creator_id,"-").concat(e.recipient_id,"-").concat(e.created_at)},a.a.createElement("p",{className:"Profile-reference-meta"},e.reference_type&&a.a.createElement(k,{className:"Profile-reference-type",id:e.creator_id},function(e){switch(e){case"surf":return"From Surfer";case"host":return"From host";default:return"Personal"}}(e.reference_type)),e.experience&&a.a.createElement("strong",{className:"Profile-reference-experience Profile-reference-experience-".concat(e.experience||"unknown")},"\u2605 ",e.experience||"unknown"),e.created_at&&a.a.createElement("span",{className:"Profile-reference-date"},j(e.created_at))),e.body&&a.a.createElement("p",null,a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(e.body)}})))}))))};t(110);var O=function(e){var n,t,r,l,c,o,i,s,u=e.user,m=e.interests;return a.a.createElement(w,null,a.a.createElement(y,null,"About me"),a.a.createElement(x,null,(null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.about_me)}}),(null===u||void 0===u||null===(t=u.profile)||void 0===t?void 0:t.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.about_me)}}),(null===u||void 0===u||null===(r=u.profile)||void 0===r?void 0:r.interests)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"More about my interests")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.interests)}}),(null===m||void 0===m?void 0:m.interests)&&a.a.createElement("ul",{className:"AboutMe-interests"},m.interests.map((function(e){return a.a.createElement("li",{key:e.name},e.name)})))),(null===u||void 0===u||null===(l=u.profile)||void 0===l?void 0:l.media)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"My Favorite Music, Movies & Books")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.media)}})),(null===u||void 0===u||null===(c=u.profile)||void 0===c?void 0:c.teach)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Teach, Learn, Share")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.teach)}})),(null===u||void 0===u||null===(o=u.profile)||void 0===o?void 0:o.amazing_thing)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"One Amazing Thing I've Done")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.amazing_thing)}})),(null===u||void 0===u||null===(i=u.profile)||void 0===i?void 0:i.surf_reason)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Why I'm on Couchsurfing")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.surf_reason)}})),(null===u||void 0===u||null===(s=u.profile)||void 0===s?void 0:s.offer_hosts)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"What I Can Share With Hosts")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:S()(u.profile.offer_hosts)}}))))};t(111);var F=function(e){var n=e.messages;return a.a.createElement(w,null,a.a.createElement(y,null,"Messages"),a.a.createElement(x,null,n.length?a.a.createElement("div",null,"Messages coming up..."):"No messages. :-("))};var P=function(e){var n=e.friends;return a.a.createElement(w,null,a.a.createElement(y,null,"Friends"),a.a.createElement(x,null,n.length?a.a.createElement("ul",null,n.map((function(e){var n=parseInt(e.profile.replace("https://www.couchsurfing.com/users/",""),10);return a.a.createElement("li",{key:n},a.a.createElement(k,{id:n},e.profile))}))):"No friends. :-("))},T=t(85),D=t.n(T);t(216);var L=function(e){var n=e.json;return a.a.createElement(w,null,a.a.createElement(y,null,"Raw profile export"),a.a.createElement(D.a,{data:n}))},H=t(86),A=t.n(H);var C=function(e){var n,t,r,l,c,o,i,s,u,m,f,p=e.profile,d=(e.images,e.fileDate),v=p.user_data,g=p.interests,E=p.references,h=p.friends,y=p.messages,x=[{route:"/",label:"About me"},{route:"/references",label:"References",count:(null!==(n=null===E||void 0===E||null===(t=E.written_references)||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(r=null===E||void 0===E||null===(l=E.received_references)||void 0===l?void 0:l.length)&&void 0!==r?r:0)},{route:"/friends",label:"Friends",count:null!==(c=null===h||void 0===h||null===(o=h.friends)||void 0===o?void 0:o.length)&&void 0!==c?c:0},{route:"/messages",label:"Messages",count:null!==(i=null===y||void 0===y||null===(s=y.messages)||void 0===s?void 0:s.length)&&void 0!==i?i:0},{route:"/raw",label:"Raw"}];return a.a.createElement(_.a,null,a.a.createElement("div",{className:"Profile"},a.a.createElement("div",{className:"Profile-header"},a.a.createElement("p",null,a.a.createElement("em",null,a.a.createElement(k,{id:null===v||void 0===v?void 0:v.id},"Your Couchsurfing.com profile"),d&&" as of ".concat(j(d)))),a.a.createElement("h1",null,(null===v||void 0===v||null===(u=v.profile)||void 0===u?void 0:u.first_name)&&"".concat(v.profile.first_name," "),(null===v||void 0===v||null===(m=v.profile)||void 0===m?void 0:m.last_name)&&"".concat(v.profile.last_name," "),(null===v||void 0===v?void 0:v.username)&&"(".concat(v.username,")")),(null===v||void 0===v||null===(f=v.profile)||void 0===f?void 0:f.occupation)&&a.a.createElement("h3",null,v.profile.occupation)),a.a.createElement(w,null,a.a.createElement("ul",{className:"Profile-tabs"},x.map((function(e){var n=e.route,t=e.label,r=e.count;return a.a.createElement("li",{key:n},a.a.createElement(_.b,{activeClassName:"is-active",to:n},t,r&&a.a.createElement("span",{className:"Profile-tab-count"},r)))})))),a.a.createElement(b.c,null,a.a.createElement(b.a,{exact:!0,path:"/"},a.a.createElement(O,{user:v,interests:g})),a.a.createElement(b.a,{path:"/references"},a.a.createElement(I,{references:E})),a.a.createElement(b.a,{path:"/friends"},a.a.createElement(P,{friends:(null===h||void 0===h?void 0:h.friends)||[]})),a.a.createElement(b.a,{path:"/messages"},a.a.createElement(F,{messages:(null===y||void 0===y?void 0:y.messages)||[]})),a.a.createElement(b.a,{path:"/raw"},a.a.createElement(L,{json:p}))),a.a.createElement("div",{className:"promo"},a.a.createElement("a",{href:"https://www.trustroots.org/?ref=couchspinner",target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{src:A.a,className:"tr-logo",alt:"Trustroots"}),a.a.createElement("br",null),"Join Trustroots.org",a.a.createElement("br",null),"Travellers hospitality community."))))};function z(e){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(i.a.mark((function e(n){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.filter((function(e,n){return!n.dir&&"json"===n.name.split(".").pop()}))).length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.file(t[0].name).async("string");case 5:return r=e.sent,e.prev=6,a=JSON.parse(r),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(6),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}function R(e){e.filter((function(e,n){return!n.dir&&["jpg","gif","png"].includes(n.name.split(".").pop())}));return{}}function W(e){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(i.a.mark((function e(n){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.loadAsync(n);case 2:return t=e.sent,e.next=5,z(t);case 5:return r=e.sent,e.next=8,R(t);case 8:return a=e.sent,e.abrupt("return",{json:r,images:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){var e=Object(r.useState)(!1),n=Object(s.a)(e,2),t=n[0],l=n[1],c=Object(r.useState)({}),o=Object(s.a)(c,2),f=o[0],p=o[1],d=Object(r.useState)(!1),g=Object(s.a)(d,2),E=g[0],_=g[1],b=Object(r.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(n){var t,r,a,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("acceptedFiles:",n),1===n.length){e.next=3;break}return e.abrupt("return",alert("Just one file please."));case 3:if(t=n[0],["application/zip","application/json"].includes(t.type)){e.next=6;break}return e.abrupt("return",alert('Please drop either the zip file or json file, e.g. "couchsurfing-export-123456-202005200751.zip", or "123456-202005200751.json"'));case 6:if(_(t.lastModifiedDate),"application/zip"!==t.type){e.next=17;break}return e.next=10,W(t);case 10:r=e.sent,a=r.json,c=r.images,l(a),p(c),e.next=22;break;case 17:if("application/json"!==t.type){e.next=22;break}return e.next=20,t.text();case 20:o=e.sent;try{s=JSON.parse(o),l(s)}catch(i){alert("File is little too funky for us to understand... \ud83d\ude25")}case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),w=Object(m.a)({onDrop:b}),y=w.getRootProps,x=w.getInputProps,k=w.isDragActive;return a.a.createElement("div",Object.assign({className:v()("App",{"is-dropping":k})},y()),t?a.a.createElement(C,{profile:t,images:f,fileDate:E}):a.a.createElement(h,{isDragActive:k,input:a.a.createElement("input",x())}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,n,t){e.exports=t.p+"static/media/sofa.ba454e2c.svg"},86:function(e,n,t){e.exports=t.p+"static/media/trustroots-tree.19b96bca.svg"},89:function(e,n,t){e.exports=t(219)},94:function(e,n,t){}},[[89,1,2]]]);
//# sourceMappingURL=main.25c1d1d1.chunk.js.map