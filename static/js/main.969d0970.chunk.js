(this.webpackJsonpcouchspinner=this.webpackJsonpcouchspinner||[]).push([[0],{202:function(e,n,t){},203:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),l=t(69),c=t.n(l),i=(t(80),t(11)),o=t.n(i),s=t(18),u=t(28),m=t(74),f=t(71),d=t.n(f),p=(t(91),t(72)),v=t.n(p);t(92);var g=function(e){var n=e.isDragActive,t=e.input;return a.a.createElement("div",{className:"Intro"},a.a.createElement("h1",null,"CouchSpinner"),a.a.createElement("img",{src:v.a,className:"Intro-logo",alt:"logo"}),t,n?a.a.createElement("p",null,"Drop the file here..."):a.a.createElement("p",null,"Drop the Couchsurfing profile file here, or click to select file."),a.a.createElement("p",null,"By ",a.a.createElement("a",{onClick:function(e){e.stopPropagation()},href:"https://www.trustroots.org/?ref=couchspinner"},"Trustroots")))};t(93),t(94);function E(e){var n=e.children;return a.a.createElement("div",{className:"Section"},n)}function h(e){var n=e.children;return a.a.createElement("div",{className:"Section-heading"},n)}function _(e){return a.a.createElement("div",Object.assign({className:"Section-content"},e),e.children)}function b(e){return e.id?a.a.createElement("a",Object.assign({},e,{href:"https://www.couchsurfing.com/users/".concat(e.id)}),e.children):a.a.createElement("span",e,e.children)}function w(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var y=t(3),j=t.n(y);t(95);function k(e,n){return e&&0!==e.length?e.filter((function(e){return e.experience===n})).length:0}var x=function(e){var n,t,r,l=e.references;return a.a.createElement(E,null,a.a.createElement(h,null,"References"),a.a.createElement(_,null,a.a.createElement("p",null,(null===l||void 0===l||null===(n=l.written_references)||void 0===n?void 0:n.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.written_references.length," written: ")),"".concat(k(l.written_references,"positive")," positive, "),"".concat(k(l.written_references,"neutral")," neutral, and "),"".concat(k(l.written_references,"negative")," negative.")):"You didn't write references"),a.a.createElement("p",null,(null===l||void 0===l||null===(t=l.received_references)||void 0===t?void 0:t.length)?a.a.createElement(a.a.Fragment,null,a.a.createElement("strong",null,"".concat(l.received_references.length," received: ")),"".concat(k(l.received_references,"positive")," positive, "),"".concat(k(l.received_references,"neutral")," neutral, and "),"".concat(k(l.received_references,"negative")," negative.")):"You didn't receive references"),(null===l||void 0===l||null===(r=l.received_references)||void 0===r?void 0:r.length)&&l.received_references.map((function(e){return a.a.createElement("div",{className:"Profile-reference",key:"".concat(e.creator_id,"-").concat(e.recipient_id,"-").concat(e.created_at)},a.a.createElement("p",{className:"Profile-reference-meta"},e.reference_type&&a.a.createElement(b,{className:"Profile-reference-type",id:e.creator_id},function(e){switch(e){case"surf":return"From Surfer";case"host":return"From host";default:return"Personal"}}(e.reference_type)),e.experience&&a.a.createElement("strong",{className:"Profile-reference-experience Profile-reference-experience-".concat(e.experience||"unknown")},"\u2605 ",e.experience||"unknown"),e.created_at&&a.a.createElement("span",{className:"Profile-reference-date"},w(e.created_at))),e.body&&a.a.createElement("p",null,a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(e.body)}})))}))))};t(96);var S=function(e){var n,t,r,l,c,i,o,s,u=e.user,m=e.interests;return a.a.createElement(E,null,a.a.createElement(h,null,"About me"),a.a.createElement(_,null,(null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.about_me)}}),(null===u||void 0===u||null===(t=u.profile)||void 0===t?void 0:t.about_me)&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.about_me)}}),(null===u||void 0===u||null===(r=u.profile)||void 0===r?void 0:r.interests)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"More about my interests")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.interests)}}),(null===m||void 0===m?void 0:m.interests)&&a.a.createElement("ul",{className:"AboutMe-interests"},m.interests.map((function(e){return a.a.createElement("li",{key:e.name},e.name)})))),(null===u||void 0===u||null===(l=u.profile)||void 0===l?void 0:l.media)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"My Favorite Music, Movies & Books")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.media)}})),(null===u||void 0===u||null===(c=u.profile)||void 0===c?void 0:c.teach)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Teach, Learn, Share")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.teach)}})),(null===u||void 0===u||null===(i=u.profile)||void 0===i?void 0:i.amazing_thing)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"One Amazing Thing I've Done")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.amazing_thing)}})),(null===u||void 0===u||null===(o=u.profile)||void 0===o?void 0:o.surf_reason)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"Why I'm on Couchsurfing")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.surf_reason)}})),(null===u||void 0===u||null===(s=u.profile)||void 0===s?void 0:s.offer_hosts)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement("strong",null,"What I Can Share With Hosts")),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:j()(u.profile.offer_hosts)}}))))};t(97);var N=function(e){var n=e.messages;return a.a.createElement(E,null,a.a.createElement(h,null,"Messages"),a.a.createElement(_,null,n.length?a.a.createElement("div",null,"message"):"No messages. :-("))};var O=function(e){var n=e.friends;return a.a.createElement(E,null,a.a.createElement(h,null,"Friends"),a.a.createElement(_,null,n.length?a.a.createElement("ul",null,n.map((function(e){var n=parseInt(e.profile.replace("https://www.couchsurfing.com/users/",""),10);return a.a.createElement("li",{key:n},a.a.createElement(b,{id:n},e.profile))}))):"No friends. :-("))},M=t(73),I=t.n(M);t(202);var F=function(e){var n=e.json;return a.a.createElement(E,null,a.a.createElement(h,null,"Raw profile export"),a.a.createElement(I.a,{data:n}))};var P=function(e){var n,t,l,c,i,o,u,m,f,d,p,v=e.profile,g=(e.images,e.fileDate),h=v.user_data,_=v.interests,y=v.references,j=v.friends,k=v.messages,M=Object(r.useState)("about-me"),I=Object(s.a)(M,2),P=I[0],D=I[1],T=(null!==(n=null===y||void 0===y||null===(t=y.written_references)||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(l=null===y||void 0===y||null===(c=y.received_references)||void 0===c?void 0:c.length)&&void 0!==l?l:0),L=null!==(i=null===j||void 0===j||null===(o=j.friends)||void 0===o?void 0:o.length)&&void 0!==i?i:0,H=null!==(u=null===k||void 0===k||null===(m=k.messages)||void 0===m?void 0:m.length)&&void 0!==u?u:0;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Profile"},a.a.createElement("div",{className:"Profile-header"},a.a.createElement("p",null,a.a.createElement("em",null,a.a.createElement(b,{id:null===h||void 0===h?void 0:h.id},"Your Couchsurfing.com profile"),g&&" as of ".concat(w(g)))),a.a.createElement("h1",null,(null===h||void 0===h||null===(f=h.profile)||void 0===f?void 0:f.first_name)&&"".concat(h.profile.first_name," "),(null===h||void 0===h||null===(d=h.profile)||void 0===d?void 0:d.last_name)&&"".concat(h.profile.last_name," "),(null===h||void 0===h?void 0:h.username)&&"(".concat(h.username,")")),(null===h||void 0===h||null===(p=h.profile)||void 0===p?void 0:p.occupation)&&a.a.createElement("h3",null,h.profile.occupation)),a.a.createElement(E,null,a.a.createElement("ul",{className:"Profile-tabs"},[{slug:"about-me",label:"About me"},{slug:"references",label:"References",count:T},{slug:"friends",label:"Friends",count:L},{slug:"messages",label:"Messages",count:H},{slug:"raw",label:"Raw"}].map((function(e){var n=e.slug,t=e.label,r=e.count;return a.a.createElement("li",{key:n},a.a.createElement("button",{className:n===P?"is-active":"",onClick:function(){return D(n)}},t,r&&a.a.createElement("span",{className:"Profile-tab-count"},r)))})))),"about-me"===P&&a.a.createElement(S,{user:h,interests:_}),"references"===P&&a.a.createElement(x,{references:y}),"friends"===P&&a.a.createElement(O,{friends:(null===j||void 0===j?void 0:j.friends)||[]}),"messages"===P&&a.a.createElement(N,{messages:(null===k||void 0===k?void 0:k.messages)||[]}),"raw"===P&&a.a.createElement(F,{json:v})))};function D(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(o.a.mark((function e(n){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.filter((function(e,n){return!n.dir&&"json"===n.name.split(".").pop()}))).length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.file(t[0].name).async("string");case 5:return r=e.sent,e.prev=6,a=JSON.parse(r),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(6),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}function L(e){e.filter((function(e,n){return!n.dir&&["jpg","gif","png"].includes(n.name.split(".").pop())}));return{}}function H(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(n){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.loadAsync(n);case 2:return t=e.sent,e.next=5,D(t);case 5:return r=e.sent,e.next=8,L(t);case 8:return a=e.sent,console.log(r,a),e.abrupt("return",{json:r,images:a});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(r.useState)(!1),n=Object(s.a)(e,2),t=n[0],l=n[1],c=Object(r.useState)({}),i=Object(s.a)(c,2),f=i[0],d=i[1],p=Object(r.useState)(!1),v=Object(s.a)(p,2),E=v[0],h=v[1],_=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(n){var t,r,a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("acceptedFiles:",n),1===n.length){e.next=3;break}return e.abrupt("return",alert("Just one file please."));case 3:if(t=n[0],["application/zip","application/json"].includes(t.type)){e.next=6;break}return e.abrupt("return",alert('Please drop either the zip file or json file, e.g. "couchsurfing-export-123456-202005200751.zip", or "123456-202005200751.json"'));case 6:if(h(t.lastModifiedDate),"application/zip"!==t.type){e.next=13;break}r=H(t),a=r.json,c=r.images,l(a),d(c),e.next=18;break;case 13:if("application/json"!==t.type){e.next=18;break}return e.next=16,t.text();case 16:i=e.sent;try{s=JSON.parse(i),l(s)}catch(o){alert("File is little too funky for us to understand... \ud83d\ude25")}case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),b=Object(m.a)({onDrop:_}),w=b.getRootProps,y=b.getInputProps,j=b.isDragActive;return a.a.createElement("div",Object.assign({className:"App".concat(j?" is-dropping":"")},w()),t?a.a.createElement(P,{profile:t,images:f,fileDate:E}):a.a.createElement(g,{isDragActive:j,input:a.a.createElement("input",y())}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,n,t){e.exports=t.p+"static/media/sofa.ba454e2c.svg"},75:function(e,n,t){e.exports=t(203)},80:function(e,n,t){},91:function(e,n,t){},92:function(e,n,t){},93:function(e,n,t){},94:function(e,n,t){},95:function(e,n,t){},96:function(e,n,t){},97:function(e,n,t){}},[[75,1,2]]]);
//# sourceMappingURL=main.969d0970.chunk.js.map