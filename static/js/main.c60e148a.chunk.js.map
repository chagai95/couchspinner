{"version":3,"sources":["components.js","About.js","utils.js","Intro.js","AboutMe.js","Friends.js","Images.js","Messages.js","Raw.js","References.js","Profile.js","App.js","constants.js","index.js","sofa.svg","trustroots-tree.svg"],"names":["Section","children","className","Heading","Content","props","CsProfileLink","label","id","href","userId","CsProfileName","names","alt","append","displayName","get","Anchor","title","Tabs","routes","map","route","count","key","activeClassName","to","About","forwardRef","ref","isDragActive","input","aboutRef","role","aria-hidden","formatDate","date","dateString","replace","formattedDate","Date","toLocaleDateString","undefined","year","month","day","stopUploadsFromTriggering","event","stopPropagation","Intro","src","sofa","onClick","preventDefault","current","scrollIntoView","behavior","AboutMe","user","interests","profile","about_me","dangerouslySetInnerHTML","__html","marked","interest","name","media","teach","amazing_thing","surf_reason","offer_hosts","friends","length","friend","parseInt","Images","images","blobUrl","download","Messages","messages","useState","openThread","setOpenThread","thread","console","log","profileIds","user_ids_concatenated","split","filter","threadId","created_at","hasMessages","isThreadOpen","latestMessage","pop","body","profileId","updated_at","Raw","json","data","countReferences","references","experience","reference","referenceTypeLabel","type","isFromMe","sortReferences","referernces","sort","a","b","dateA","dateB","ReferencesList","list","creator_id","recipient_id","reference_type","response_body","response_created_at","experienceLabel","References","writtenReferences","written_references","receivedReferences","received_references","exact","path","Profile","fileDate","user_data","window","sessionStorage","clear","first_name","last_name","username","occupation","Friends","target","rel","TrustrootsTree","getJsonFromZip","zip","files","relativePath","zipEntry","dir","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","getNamesFromJson","Map","collectName","visit","person","surfer","host","display_name","set","couch_visits","host_couch_visits","forEach","surfer_couch_visits","setCacheValue","value","setItem","error","readBlobFile","text","resolve","reject","fr","FileReader","onload","result","readAsText","App","isStorageAvailable","storage","x","removeItem","e","DOMException","code","testStorage","cachedFileDate","getItem","cachedProfile","cachedProfileImages","cachedNames","setProfile","profileImages","setProfileImages","setNames","setFileDate","isProcessing","setIsProcessing","createRef","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","lastModifiedDate","jsonProfile","useDropzone","getRootProps","getInputProps","classnames","Sentry","dsn","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.c60e148a.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport './components.scss';\n\nexport function Section({ children }) {\n  return <div className=\"Section\">{children}</div>;\n}\n\nexport function Heading({ children }) {\n  return <div className=\"Section-heading\">{children}</div>;\n}\n\nexport function Content(props) {\n  return (\n    <div className=\"Section-content\" {...props}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children || 'Member';\n  return !!props.id ? (\n    <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n      {props.id === props.userId ? 'You' : label}\n    </a>\n  ) : (\n    <span {...props}>{label}</span>\n  );\n}\n\nexport function CsProfileName(props) {\n  const { id, names, alt, append } = props;\n  const displayName = names ? names.get(id)?.displayName : false;\n\n  return (\n    <>\n      <CsProfileLink id={id} {...props}>\n        {displayName || alt}\n      </CsProfileLink>\n      {displayName && append}\n    </>\n  );\n}\n\nexport function Anchor({ id }) {\n  return (\n    <a className=\"Anchor\" href={`#${id}`} id={id} title=\"Link here\">\n      #\n    </a>\n  );\n}\n\nexport function Tabs({ routes }) {\n  return (\n    <ul className=\"Tabs\">\n      {routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={route}>\n            {label}\n            {!!count && <span className=\"Tab-count\">{count}</span>}\n          </NavLink>\n        </li>\n      ))}\n    </ul>\n  );\n}\n","import React, { forwardRef } from 'react';\n\nimport { Anchor } from './components';\nimport './About.css';\n\nconst About = forwardRef(({ isDragActive, input, aboutRef }, ref) => {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\" ref={ref}>\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <h3>\n          Why CouchSpinner exists? <Anchor id=\"why-couchspinner-exists\" />\n        </h3>\n        <p>\n          CouchSurfing locked out a significant portion of their community by{' '}\n          <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">\n            turning into a paid site overnight\n          </a>{' '}\n          on May 14, 2020.\n        </p>\n        <p>\n          You can recover your data from CouchSurfing, but what can you do with\n          it then?\n        </p>\n        <p>\n          With CouchSpinner, you can preview your profile, references, and\n          messages again!\n        </p>\n\n        <h3>\n          How can I export my CouchSurfing profile?{' '}\n          <Anchor id=\"how-can-i-export-my-couchsurfing-profile\" />\n        </h3>\n        <p>\n          If you can still access your profile,{' '}\n          <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">\n            follow these instructions to download your data\n          </a>\n          .\n        </p>\n        <p>\n          If you cannot access your profile, you can ask for a copy of your data\n          and to delete your account by contacting Couchsurfing Support at{' '}\n          <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a>{' '}\n          or through{' '}\n          <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>\n          .\n        </p>\n\n        <h3>\n          Do you store my CouchSurfing profile?{' '}\n          <Anchor id=\"do-you-store-my-couchsurfing-profile\" />\n        </h3>\n        <p>\n          Nope. Your profile is never uploaded to us — we never see it.\n          Everything happens in your browser only. This is completely secure.\n        </p>\n\n        <h3>\n          Who made this? <Anchor id=\"who-made-this\" />\n        </h3>\n        <p>\n          Folks behind{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner\">\n            Trustroots.org\n          </a>\n          , a free and community ran hospitality exchange site alternative to\n          CouchSurfing.\n        </p>\n        <p>\n          We built the functionality anyway for Trustroots and wanted to give it\n          away for everyone.\n        </p>\n        <p>\n          We'd love it if you would also join Trustroots, of course!{' '}\n          <span role=\"img\" aria-hidden>\n            🙂\n          </span>\n        </p>\n\n        <h3>\n          What are other alternatives to CouchSurfing?{' '}\n          <Anchor id=\"couchsurfing-alternatives\" />\n        </h3>\n        <p>\n          You could check{' '}\n          <a href=\"https://www.trustroots.org/?ref=couchspinner\">Trustroots</a>,{' '}\n          <a href=\"https://www.bewelcome.org/\">BeWelcome</a>,{' '}\n          <a href=\"https://www.warmshowers.org/\">Warmshowers</a> and{' '}\n          <a href=\"https://hackercouch.com/\">Hackercouch</a>.\n        </p>\n\n        <h3>I see only some names, but not everyone?</h3>\n        <p>\n          Most of the Couchsurfing export doesn't contain names of other\n          profiles, only user IDs. There are a few names available from \"couch\n          requests\", which then we can show elsewhere too.\n        </p>\n\n        <h3>\n          Not all my data is here! <Anchor id=\"not-all-my-data-is-here\" />\n        </h3>\n        <p>\n          Could be! Please check the \"raw\" tab of your profile to browser what\n          the file actually contains and what we are showing.\n        </p>\n        <p>\n          The preview doesn't show everything, but also the file from\n          CouchSurfing could be only partial. They've elaborated that{' '}\n          <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">\n            some of the very old data might've been lost\n          </a>\n          . You should reach out to CouchSurfing for any specifics, though.\n        </p>\n\n        <h3>\n          Is this open-source? <Anchor id=\"is-this-open-source\" />\n        </h3>\n        <p>\n          <a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free\n          to help out.\n        </p>\n      </div>\n    </div>\n  );\n});\n\nexport default About;\n","/**\n * Give out pretty date\n *\n * Dates on CS exports are in format:\n * 2007-01-11 22:29:44 UTC\n *\n * @param  {String} date Date as a string\n * @return {String}\n */\nexport function formatDate(date) {\n  if (!date) {\n    return date;\n  }\n  const dateString = date.replace(' UTC', '');\n  const formattedDate = new Date(dateString).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n\n  return formattedDate && formattedDate !== 'Invalid Date'\n    ? formattedDate\n    : date;\n}\n\nexport const scrollToRef = ref =>\n  ref.current.scrollIntoView({\n    behavior: 'smooth',\n  });\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n  var storage;\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n}\n","import React from 'react';\n\nimport './Intro.scss';\nimport { scrollToRef } from './utils';\nimport sofa from './sofa.svg';\n\nconst stopUploadsFromTriggering = event => {\n  event.stopPropagation();\n};\n\nfunction Intro({ aboutRef }) {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>Preview Couchsurfing profile exports</h2>\n      {/* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */}\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <div className=\"Intro-instructions\">\n        <p>Drop the export file here, or click to select it.</p>\n      </div>\n      <p>\n        <a\n          href=\"#about\"\n          onClick={event => {\n            stopUploadsFromTriggering(event);\n            event.preventDefault();\n            scrollToRef(aboutRef);\n          }}\n        >\n          Read more\n        </a>\n        <br />\n        <br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={stopUploadsFromTriggering}\n          href=\"https://www.trustroots.org/?ref=couchspinner\"\n        >\n          By Trustroots\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default Intro;\n","import marked from 'marked';\nimport React from 'react';\n\nimport { Section, Heading, Content } from './components';\nimport './AboutMe.scss';\n\nfunction AboutMe({ user, interests }) {\n  return (\n    <Section>\n      <Heading>About me</Heading>\n      <Content>\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.about_me && (\n          <span\n            dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }}\n          />\n        )}\n        {user?.profile?.interests && (\n          <>\n            <p>\n              <strong>More about my interests</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.interests),\n              }}\n            />\n            {interests?.interests && (\n              <ul className=\"AboutMe-interests\">\n                {interests.interests.map(interest => (\n                  <li key={interest.name}>{interest.name}</li>\n                ))}\n              </ul>\n            )}\n          </>\n        )}\n        {user?.profile?.media && (\n          <>\n            <p>\n              <strong>My Favorite Music, Movies & Books</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.media) }}\n            />\n          </>\n        )}\n        {user?.profile?.teach && (\n          <>\n            <p>\n              <strong>Teach, Learn, Share</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{ __html: marked(user.profile.teach) }}\n            />\n          </>\n        )}\n        {user?.profile?.amazing_thing && (\n          <>\n            <p>\n              <strong>One Amazing Thing I've Done</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.amazing_thing),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.surf_reason && (\n          <>\n            <p>\n              <strong>Why I'm on Couchsurfing</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.surf_reason),\n              }}\n            />\n          </>\n        )}\n        {user?.profile?.offer_hosts && (\n          <>\n            <p>\n              <strong>What I Can Share With Hosts</strong>\n            </p>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: marked(user.profile.offer_hosts),\n              }}\n            />\n          </>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\n\nimport { Section, Heading, Content, CsProfileName } from './components';\n\nfunction AboutMe({ friends, names }) {\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        {friends.length ? (\n          <ul>\n            {friends.map(friend => {\n              const id = parseInt(\n                friend.profile.replace(\n                  'https://www.couchsurfing.com/users/',\n                  '',\n                ),\n                10,\n              );\n              return (\n                <li key={id}>\n                  <CsProfileName\n                    names={names}\n                    id={id}\n                    alt={friend.profile.replace('https://www.', '')}\n                  />\n                </li>\n              );\n            })}\n          </ul>\n        ) : (\n          'No friends. :-('\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react';\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({ images }) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {images.length ? (\n          images.map(({ id, blobUrl }) => (\n            <p key={id}>\n              <a href={blobUrl} download={id}>\n                <img src={blobUrl} alt=\"\" className=\"Image\" />\n              </a>\n            </p>\n          ))\n        ) : (\n          <p>You had no images... :-(</p>\n        )}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React, { useState } from 'react';\nimport marked from 'marked';\n\nimport './Messages.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileLink } from './components';\n\nfunction Messages({ messages, userId }) {\n  const [openThread, setOpenThread] = useState(false);\n\n  return (\n    <Section>\n      <Heading>Messages</Heading>\n      <Content>\n        {messages.length\n          ? messages.map(thread => {\n              console.log(thread);\n              // Other profile IDs than your own\n              const profileIds = thread.user_ids_concatenated\n                .split(',')\n                .filter(id => id !== userId);\n\n              // Unique ID for message thread\n              const threadId = `${thread?.user_ids_concatenated}-${thread?.created_at}`;\n\n              const hasMessages = !!thread.messages.length;\n              const isThreadOpen = openThread === threadId;\n              const latestMessage = thread.messages.pop()?.body;\n\n              return (\n                <div className=\"Message\" key={threadId}>\n                  <div className=\"Message-meta\">\n                    {profileIds.map(profileId => (\n                      <CsProfileLink id={profileId} key={profileId} />\n                    ))}\n                    {thread?.updated_at && (\n                      <span className=\"Message-date\">\n                        {formatDate(thread.updated_at)}\n                      </span>\n                    )}\n                  </div>\n                  {hasMessages && isThreadOpen && (\n                    <div\n                      className=\"Message-thread\"\n                      dangerouslySetInnerHTML={{\n                        __html: marked(latestMessage),\n                      }}\n                    />\n                  )}\n                  {hasMessages && !isThreadOpen && (\n                    <>\n                      {latestMessage && (\n                        <div\n                          className=\"Message-preview\"\n                          dangerouslySetInnerHTML={{\n                            __html: marked(latestMessage),\n                          }}\n                        />\n                      )}\n                      <button\n                        className=\"Message-read\"\n                        onClick={setOpenThread(threadId)}\n                      >\n                        Read all\n                      </button>\n                    </>\n                  )}\n\n                  {!hasMessages && (\n                    <p className=\"Message-thread\">Empty message.</p>\n                  )}\n                </div>\n              );\n            })\n          : 'No messages. :-('}\n      </Content>\n    </Section>\n  );\n}\n\nexport default Messages;\n","import React from 'react';\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({ json }) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport marked from 'marked';\n\nimport './References.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileName, Tabs } from './components';\n\n/**\n * Count how many certain type references there are in array\n *\n * @param  {Array} references Array of references\n * @param  {String} experience \"positive\", \"neutral\" or \"negative\"\n * @return {Int} Total count\n */\nfunction countReferences(references, experience) {\n  if (!references || references.length === 0) {\n    return 0;\n  }\n\n  return references.filter(reference => reference.experience === experience)\n    .length;\n}\n\nfunction referenceTypeLabel(type, isFromMe) {\n  switch (type) {\n    case 'surf':\n      return isFromMe ? 'To surfer' : 'From surfer';\n    case 'host':\n      return isFromMe ? 'To host' : 'From host';\n    default:\n      return isFromMe ? 'To member' : 'From member';\n  }\n}\n\nfunction experienceLabel(experience) {\n  switch (experience) {\n    case 'positive':\n      return 'Positive';\n    case 'negative':\n      return 'Negative';\n    case 'neutral':\n      return 'Neutral';\n    case 'did_not_meet':\n      return 'Did not meet';\n    default:\n      return experience;\n  }\n}\n\nfunction sortReferences(referernces) {\n  return referernces.sort(function (a, b) {\n    var dateA = a.created_at;\n    var dateB = b.created_at;\n    if (dateA < dateB) {\n      return -1;\n    }\n    if (dateA > dateB) {\n      return 1;\n    }\n\n    // must be equal\n    return 0;\n  });\n}\n\nfunction ReferencesList({ list, userId, names }) {\n  return list.map(reference => {\n    const {\n      body,\n      created_at,\n      creator_id,\n      experience,\n      recipient_id,\n      reference_type,\n      response_body,\n      response_created_at,\n    } = reference;\n    const isFromMe = creator_id === userId;\n    const profileId = isFromMe ? recipient_id : creator_id;\n\n    return (\n      <div\n        className=\"Profile-reference\"\n        key={`${creator_id}-${recipient_id}-${created_at}`}\n      >\n        <p className=\"Profile-reference-meta\">\n          {isFromMe ? (\n            referenceTypeLabel(reference_type, isFromMe)\n          ) : (\n            <>\n              <CsProfileName\n                className=\"Profile-reference-type\"\n                names={names}\n                id={profileId}\n                alt={referenceTypeLabel(reference_type)}\n                append={\n                  <>\n                    {reference_type === 'host' && '(host)'}\n                    {reference_type === 'surf' && '(surfer)'}\n                  </>\n                }\n              />\n            </>\n          )}\n          {experience && (\n            <strong\n              className={`Profile-reference-experience Profile-reference-experience-${experience}`}\n            >\n              {experience === 'positive' && '★ '}\n              {experienceLabel(experience)}\n            </strong>\n          )}\n          {created_at && (\n            <span className=\"Profile-reference-date\">\n              {formatDate(created_at)}\n            </span>\n          )}\n        </p>\n        {body && (\n          <p>\n            <span dangerouslySetInnerHTML={{ __html: marked(body) }} />\n          </p>\n        )}\n        {response_body && (\n          <div className=\"Profile-reference-response\">\n            <p>\n              <strong>Response</strong>\n              {response_created_at && (\n                <span className=\"Profile-reference-date\">\n                  {` ${formatDate(response_created_at)}`}\n                </span>\n              )}\n            </p>\n            <p>\n              <span\n                dangerouslySetInnerHTML={{ __html: marked(response_body) }}\n              />\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  });\n}\n\nfunction References({ references, userId, names }) {\n  const writtenReferences = sortReferences(\n    references?.written_references ?? [],\n  );\n  const receivedReferences = sortReferences(\n    references?.received_references ?? [],\n  );\n\n  return (\n    <Router>\n      <Section>\n        <Heading>References</Heading>\n        <Content>\n          <p>\n            {writtenReferences.length ? (\n              <>\n                <strong>{`${writtenReferences.length} written: `}</strong>\n                {`${countReferences(writtenReferences, 'positive')} positive, `}\n                {`${countReferences(\n                  writtenReferences,\n                  'neutral',\n                )} neutral, and `}\n                {`${countReferences(writtenReferences, 'negative')} negative.`}\n              </>\n            ) : (\n              `You didn't write references`\n            )}\n          </p>\n          <p>\n            {receivedReferences.length ? (\n              <>\n                <strong>{`${receivedReferences.length} received: `}</strong>\n                {`${countReferences(\n                  receivedReferences,\n                  'positive',\n                )} positive, `}\n                {`${countReferences(\n                  receivedReferences,\n                  'neutral',\n                )} neutral, and `}\n                {`${countReferences(receivedReferences, 'negative')} negative.`}\n              </>\n            ) : (\n              `You didn't receive references`\n            )}\n          </p>\n\n          <Tabs\n            routes={[\n              { route: '/references', label: 'Received references' },\n              { route: '/references/written', label: 'Written references' },\n            ]}\n          />\n\n          <Switch>\n            <Route exact path=\"/references\">\n              <h3>Received references</h3>\n              <ReferencesList\n                list={receivedReferences}\n                names={names}\n                userId={userId}\n              />\n            </Route>\n            <Route path=\"/references/written\">\n              <h3>Written references</h3>\n              <ReferencesList\n                list={writtenReferences}\n                names={names}\n                userId={userId}\n              />\n            </Route>\n          </Switch>\n        </Content>\n      </Section>\n    </Router>\n  );\n}\n\nexport default References;\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Messages from './Messages';\nimport Raw from './Raw';\nimport References from './References';\nimport TrustrootsTree from './trustroots-tree.svg';\n\nfunction Profile({ fileDate, images, names, profile }) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount =\n    (references?.written_references?.length ?? 0) +\n    (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  // const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    // { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' },\n  ];\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <p>\n            <em>\n              <CsProfileLink id={user?.id}>\n                Your Couchsurfing.com profile\n              </CsProfileLink>\n              {fileDate && ` as of ${formatDate(fileDate)}`}\n            </em>\n            <a\n              href=\"/\"\n              className=\"Profile-clear\"\n              onClick={() => window.sessionStorage.clear()}\n            >\n              Clear out the profile\n            </a>\n          </p>\n          <h1>\n            {user?.profile?.first_name && `${user.profile.first_name} `}\n            {user?.profile?.last_name && `${user.profile.last_name} `}\n            {user?.username && `(${user.username})`}\n          </h1>\n          {user?.profile?.occupation && <h3>{user.profile.occupation}</h3>}\n        </div>\n\n        <Section>\n          <Tabs routes={routes} />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={user} interests={interests} />\n          </Route>\n          <Route path=\"/references\">\n            <References\n              names={names}\n              references={references}\n              userId={user?.id}\n            />\n          </Route>\n          <Route path=\"/friends\">\n            <Friends names={names} friends={friends?.friends || []} />\n          </Route>\n          <Route path=\"/messages\">\n            <Messages messages={messages?.messages || []} userId={user?.id} />\n          </Route>\n          <Route path=\"/images\">\n            <Images images={images} />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={profile} />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a\n            href=\"https://www.trustroots.org/?ref=couchspinner\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" />\n            <br />\n            Join Trustroots.org\n            <br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","import { useDropzone } from 'react-dropzone';\nimport classnames from 'classnames';\nimport jszip from 'jszip';\nimport React, { useCallback, useState, useEffect, createRef } from 'react';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = false;\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch {\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return (\n      !zipEntry.dir &&\n      ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop())\n    );\n  });\n\n  const imageProcessor = files.map(async file => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    images,\n    json,\n  };\n}\n\nfunction getNamesFromJson(json) {\n  const names = new Map();\n\n  const collectName = visit => {\n    const person = visit?.surfer || visit?.host || {};\n    const username = person?.username;\n    const id = person?.profile?.id;\n    const displayName = person?.profile?.display_name;\n    names.set(id, { displayName, username });\n  };\n\n  if (json?.couch_visits?.host_couch_visits) {\n    json.couch_visits.host_couch_visits.forEach(collectName);\n  }\n\n  if (json?.couch_visits?.surfer_couch_visits) {\n    json.couch_visits.surfer_couch_visits.forEach(collectName);\n  }\n\n  return names;\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch (error) {\n    console.error(`Saving ${key} in cache failed:`, error);\n  }\n}\n\n/**\n * Read file from Blob or File entry\n * @param  {[File|Blob]}\n * @return {[String]} Text contents of the File\n */\nfunction readBlobFile(file) {\n  // Browser supports Blob.text(), all good!\n  // https://developer.mozilla.org/en-US/docs/Web/API/Blob/text\n  if (typeof file.text === 'function') {\n    return file.text();\n  }\n\n  // Namely Safari needs this\n  // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsText\n  // https://stackoverflow.com/a/46568146\n  return new Promise((resolve, reject) => {\n    var fr = new FileReader();\n    fr.onload = () => {\n      resolve(fr.result);\n    };\n    fr.readAsText(file);\n  });\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  // Re-hydrade previous cache\n  const cachedFileDate =\n    isStorageAvailable &&\n    window.sessionStorage.getItem(`${STORAGE_PREFIX}_file_date`);\n  const cachedProfile =\n    isStorageAvailable &&\n    JSON.parse(window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`));\n  const cachedProfileImages =\n    isStorageAvailable &&\n    JSON.parse(\n      window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`),\n    );\n  const cachedNames = cachedProfile\n    ? getNamesFromJson(cachedProfile)\n    : new Map();\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [names, setNames] = useState(cachedNames);\n  const [fileDate, setFileDate] = useState(cachedFileDate || false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const ref = createRef();\n\n  // Store for the browser session — gets cleaared out when closing tab but not on page refresh\n  useEffect(() => {\n    if (isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert(\n        'Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"',\n      );\n    }\n\n    setFileDate(file.lastModifiedDate);\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      const names = getNamesFromJson(json);\n      setProfile(json);\n      setNames(names);\n      setProfileImages(images);\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await readBlobFile(file);\n\n      try {\n        const json = JSON.parse(jsonProfile);\n        const names = getNamesFromJson(json);\n        setProfile(json);\n        setNames(names);\n      } catch {\n        alert('File is little too funky for us to understand... 😥');\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div className={classnames('App', { 'is-processing': isProcessing })}>\n      {profile ? (\n        <Profile\n          fileDate={fileDate}\n          images={profileImages}\n          names={names}\n          profile={profile}\n        />\n      ) : (\n        <>\n          <div\n            className={classnames('drop-container', {\n              'is-dropping': isDragActive,\n            })}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            <Intro aboutRef={ref} />\n          </div>\n          <About ref={ref} />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/browser';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// JavaScript error logging\nSentry.init({\n  dsn:\n    'https://dace55ddccfc480083c04f2a876322a3@o356100.ingest.sentry.io/5288459',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/sofa.ba454e2c.svg\";","module.exports = __webpack_public_path__ + \"static/media/trustroots-tree.19b96bca.svg\";"],"sourceRoot":""}