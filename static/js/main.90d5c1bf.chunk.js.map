{"version":3,"sources":["components.js","About.js","utils.js","Intro.js","AboutMe.js","Friends.js","Images.js","Messages.js","Raw.js","References.js","Profile.js","App.js","constants.js","index.js","sofa.svg","trustroots-tree.svg"],"names":["Section","children","className","Heading","Content","props","CsProfileLink","label","id","href","userId","CsProfileName","names","alt","append","displayName","get","Anchor","title","Tabs","routes","map","route","count","key","activeClassName","to","About","forwardRef","ref","isDragActive","input","aboutRef","role","aria-hidden","formatDate","date","dateString","replace","formattedDate","Date","toLocaleDateString","undefined","year","month","day","stopUploadsFromTriggering","event","stopPropagation","Intro","src","sofa","onClick","preventDefault","current","scrollIntoView","behavior","AboutMe","user","interests","profile","about_me","dangerouslySetInnerHTML","__html","marked","interest","name","media","teach","amazing_thing","surf_reason","offer_hosts","friends","length","friend","parseInt","Images","images","blobUrl","download","Messages","messages","useState","openThread","setOpenThread","thread","console","log","profileIds","user_ids_concatenated","split","filter","threadId","created_at","hasMessages","isThreadOpen","latestMessage","pop","body","profileId","updated_at","Raw","json","data","countReferences","references","experience","reference","referenceTypeLabel","type","isFromMe","sortReferences","referernces","sort","a","b","dateA","dateB","ReferencesList","list","creator_id","recipient_id","reference_type","response_body","response_created_at","experienceLabel","References","writtenReferences","written_references","receivedReferences","received_references","exact","path","Profile","fileDate","user_data","window","sessionStorage","clear","first_name","last_name","username","occupation","Friends","target","rel","TrustrootsTree","getJsonFromZip","zip","files","relativePath","zipEntry","dir","file","async","jsonString","JSON","parse","getImagesFromZip","includes","imageProcessor","blob","urlCreator","URL","webkitURL","createObjectURL","Promise","all","extractZip","jszip","loadAsync","getNamesFromJson","Map","collectName","visit","person","surfer","host","display_name","set","couch_visits","host_couch_visits","forEach","surfer_couch_visits","setCacheValue","value","setItem","error","App","isStorageAvailable","storage","x","removeItem","e","DOMException","code","testStorage","cachedFileDate","getItem","cachedProfile","cachedProfileImages","cachedNames","setProfile","profileImages","setProfileImages","setNames","setFileDate","isProcessing","setIsProcessing","createRef","useEffect","stringify","onDrop","useCallback","acceptedFiles","alert","lastModifiedDate","text","jsonProfile","useDropzone","getRootProps","getInputProps","classnames","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.90d5c1bf.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from \"react-router-dom\";\n\nimport './components.scss';\n\nexport function Section({children}) {\n  return <div className=\"Section\">{children}</div>\n}\n\nexport function Heading({children}) {\n  return <div className=\"Section-heading\">{children}</div>\n}\n\nexport function Content(props) {\n  return <div className=\"Section-content\" {...props}>{props.children}</div>\n}\n\nexport function CsProfileLink(props) {\n  const label = props.children || 'Member';\n  return !! props.id\n    ? (\n      <a {...props} href={`https://www.couchsurfing.com/users/${props.id}`}>\n        { props.id === props.userId ? 'You' : label }\n      </a>\n    )\n    : <span {...props}>{label}</span>\n}\n\nexport function CsProfileName(props) {\n  const { id, names, alt, append } = props;\n  const displayName = names ? names.get(id)?.displayName : false;\n\n  return (\n    <>\n      <CsProfileLink id={id} {...props}>\n        { displayName || alt }\n      </CsProfileLink>\n      { displayName && append }\n    </>\n  );\n}\n\nexport function Anchor({id}) {\n  return (\n    <a\n      className=\"Anchor\"\n      href={ `#${id}` }\n      id={ id }\n      title=\"Link here\"\n    >#</a>\n  );\n}\n\n\nexport function Tabs({routes}) {\n  return (\n    <ul className=\"Tabs\">\n      { routes.map(({ route, label, count }) => (\n        <li key={route}>\n          <NavLink activeClassName=\"is-active\" to={ route }>\n            { label }\n            { !! count && <span className=\"Tab-count\">{ count }</span> }\n          </NavLink>\n        </li>\n      )) }\n    </ul>\n  );\n}\n","import React, { forwardRef } from 'react'\n\nimport { Anchor } from './components';\nimport './About.css';\n\nconst About = forwardRef(({isDragActive, input, aboutRef}, ref) => {\n  return (\n    <div className=\"App-landing-section About\" id=\"about\" ref={ ref }>\n      <h1>About</h1>\n\n      <div className=\"About-FAQ\">\n        <h3>Why CouchSpinner exists? <Anchor id=\"why-couchspinner-exists\" /></h3>\n        <p>CouchSurfing locked out a significant portion of their community by <a href=\"https://blog.couchsurfing.com/couchsurfing-needs-your-help/\">turning into a paid site overnight</a> on May 14, 2020.</p>\n        <p>You can recover your data from CouchSurfing, but what can you do with it then?</p>\n        <p>With CouchSpinner, you can preview your profile, references, and messages again!</p>\n\n        <h3>How can I export my CouchSurfing profile? <Anchor id=\"how-can-i-export-my-couchsurfing-profile\" /></h3>\n        <p>If you can still access your profile, <a href=\"https://support.couchsurfing.org/hc/en-us/articles/360045738353-Download-your-data\">follow these instructions to download your data</a>.</p>\n        <p>If you cannot access your profile, you can ask for a copy of your data and to delete your account by contacting Couchsurfing Support at <a href=\"mailto:support@couchsurfing.com\">support@couchsurfing.com</a> or through <a href=\"mailto:privacy@couchsurfing.com\">privacy@couchsurfing.com</a>.</p>\n\n        <h3>Do you store my CouchSurfing profile? <Anchor id=\"do-you-store-my-couchsurfing-profile\" /></h3>\n        <p>Nope. Your profile is never uploaded to us — we never see it. Everything happens in your browser only. This is completely secure.</p>\n\n        <h3>Who made this? <Anchor id=\"who-made-this\" /></h3>\n        <p>Folks behind <a href=\"https://www.trustroots.org/?ref=couchspinner\">Trustroots.org</a>, a free and community ran hospitality exchange site alternative to CouchSurfing.</p>\n        <p>We built the functionality anyway for Trustroots and wanted to give it away for people who don't want to join Trustroots.</p>\n        <p>We'd love it if you considered joining Trustroots, though! <span role=\"img\" aria-hidden>🙂</span></p>\n\n        <h3>What are other alternatives to CouchSurfing? <Anchor id=\"couchsurfing-alternatives\" /></h3>\n        <p>You could check <a href=\"https://www.trustroots.org/?ref=couchspinner\">Trustroots</a>, <a href=\"https://www.bewelcome.org/\">BeWelcome</a>, <a href=\"https://www.warmshowers.org/\">Warmshowers</a> and <a href=\"https://hackercouch.com/\">Hackercouch</a>.</p>\n\n        <h3>Not all my data is here! <Anchor id=\"not-all-my-data-is-here\" /></h3>\n        <p>Could be! Please check the \"raw\" tab of your profile to browser what the file actually contains and what we are showing.</p>\n        <p>The preview doesn't show everything, but also the file from CouchSurfing could be only partial. They've elaborated that <a href=\"https://www.facebook.com/groups/253525915764545/?post_id=274543140329489&comment_id=274552816995188&reply_comment_id=274560876994382\">some of the very old data might've been lost</a>. You should reach out to CouchSurfing for any specifics, though.</p>\n\n        <h3>Is this open-source? <Anchor id=\"is-this-open-source\" /></h3>\n        <p><a href=\"https://github.com/simison/couchspinner\">Yep!</a> Feel free to help out.</p>\n      </div>\n    </div>\n  );\n});\n\nexport default About;\n","/**\n * Give out pretty date\n *\n * Dates on CS exports are in format:\n * 2007-01-11 22:29:44 UTC\n *\n * @param  {String} date Date as a string\n * @return {String}\n */\nexport function formatDate(date) {\n  if (!date) {\n    return date;\n  }\n  const dateString = date.replace(' UTC', '');\n  const formattedDate = new Date(dateString).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });\n\n  return formattedDate && formattedDate !== 'Invalid Date' ? formattedDate : date;\n}\n\nexport const scrollToRef = ref => ref.current.scrollIntoView({\n  behavior: 'smooth'\n});\n\n/**\n * Test if browser supports sessionStorage or localStorage\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n *\n * @param  {[String]} type Either `sessionStorage` or `localStorage`\n * @return {[Boolean]}\n */\nexport function testStorage(type) {\n    var storage;\n    try {\n      storage = window[type];\n      var x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return e instanceof DOMException && (\n        // everything except Firefox\n        e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n        // acknowledge QuotaExceededError only if there's something already stored\n        (storage && storage.length !== 0);\n    }\n}\n","import React from 'react'\n\nimport './Intro.scss';\nimport { scrollToRef } from './utils';\nimport sofa from './sofa.svg';\n\nconst stopUploadsFromTriggering = event => { event.stopPropagation(); };\n\nfunction Intro({aboutRef}) {\n  return (\n    <div className=\"App-landing-section Intro\">\n      <h1>CouchSpinner</h1>\n      <h2>Preview Couchsurfing profile exports</h2>\n      { /* https://www.flaticon.com/free-icon/sofa_2965901?term=sofa&page=1&position=39 */ }\n      <img src={sofa} className=\"Intro-logo\" alt=\"logo\" />\n      <div className=\"Intro-instructions\">\n        <p>Drop the export file here, or click to select it.</p>\n      </div>\n      <p>\n        <a href=\"#about\" onClick={ event => {\n          stopUploadsFromTriggering(event);\n          event.preventDefault();\n          scrollToRef(aboutRef);\n        }}>\n          Read more\n        </a>\n        <br /><br />\n        <a\n          className=\"Intro-by-link\"\n          onClick={stopUploadsFromTriggering}\n          href=\"https://www.trustroots.org/?ref=couchspinner\"\n        >\n          By Trustroots\n        </a>\n      </p>\n    </div>\n  );\n};\n\nexport default Intro;\n","import marked from 'marked';\nimport React from 'react'\n\nimport { Section, Heading, Content } from './components';\nimport './AboutMe.scss';\n\nfunction AboutMe({user, interests}) {\n  return (\n    <Section>\n      <Heading>About me</Heading>\n      <Content>\n        { user?.profile?.about_me && (\n          <span dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }} />\n        ) }\n        { user?.profile?.about_me && (\n          <span dangerouslySetInnerHTML={{ __html: marked(user.profile.about_me) }} />\n        ) }\n        { user?.profile?.interests && (\n          <>\n            <p><strong>More about my interests</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.interests) }} />\n            { interests?.interests && (\n              <ul className=\"AboutMe-interests\">\n              { interests.interests.map(interest => (\n                <li key={interest.name}>{interest.name}</li>\n              )) }\n              </ul>\n            ) }\n          </>\n        ) }\n        { user?.profile?.media && (\n          <>\n            <p><strong>My Favorite Music, Movies & Books</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.media) }} />\n          </>\n        ) }\n        { user?.profile?.teach && (\n          <>\n            <p><strong>Teach, Learn, Share</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.teach) }} />\n          </>\n        ) }\n        { user?.profile?.amazing_thing && (\n          <>\n            <p><strong>One Amazing Thing I've Done</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.amazing_thing) }} />\n          </>\n        ) }\n        { user?.profile?.surf_reason && (\n          <>\n            <p><strong>Why I'm on Couchsurfing</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.surf_reason) }} />\n          </>\n        ) }\n        { user?.profile?.offer_hosts && (\n          <>\n            <p><strong>What I Can Share With Hosts</strong></p>\n            <span dangerouslySetInnerHTML={{ __html: marked(user.profile.offer_hosts) }} />\n          </>\n        ) }\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react'\n\nimport { Section, Heading, Content, CsProfileName } from './components';\n\nfunction AboutMe({friends, names}) {\n  return (\n    <Section>\n      <Heading>Friends</Heading>\n      <Content>\n        { friends.length ? (\n          <ul>\n          { friends.map(friend => {\n            const id = parseInt(friend.profile.replace('https://www.couchsurfing.com/users/', ''), 10);\n            return (\n              <li key={id}>\n                <CsProfileName names={ names } id={id} alt={ friend.profile.replace('https://www.', '') } />\n              </li>\n            );\n          }) }\n          </ul>\n        ) : 'No friends. :-(' }\n      </Content>\n    </Section>\n  );\n}\n\nexport default AboutMe;\n","import React from 'react'\n\nimport { Content, Section, Heading } from './components';\nimport './Images.css';\n\nfunction Images({images}) {\n  return (\n    <Section>\n      <Heading>Images</Heading>\n      <Content>\n        {\n          images.length\n          ? (\n            images.map(({id, blobUrl}) => (\n              <p key={id}>\n                <a href={blobUrl} download={id}>\n                  <img src={blobUrl} alt=\"\" className=\"Image\" />\n                </a>\n              </p>\n            ))\n          )\n          : <p>You had no images... :-(</p>\n        }\n      </Content>\n    </Section>\n  );\n}\n\nexport default Images;\n","import React, { useState } from 'react'\nimport marked from 'marked';\n\nimport './Messages.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileLink } from './components';\n\nfunction Messages({messages, userId}) {\n  const [openThread, setOpenThread] = useState(false);\n\n  return (\n    <Section>\n      <Heading>Messages</Heading>\n      <Content>\n        { messages.length ? (\n          messages.map(thread => {\n            console.log(thread);\n            // Other profile IDs than your own\n            const profileIds = thread.user_ids_concatenated.split(',').filter(id => id !== userId);\n\n            // Unique ID for message thread\n            const threadId = `${thread?.user_ids_concatenated}-${thread?.created_at}`;\n\n            const hasMessages = !! thread.messages.length;\n            const isThreadOpen = openThread === threadId;\n            const latestMessage = thread.messages.pop()?.body;\n\n            return (\n              <div className=\"Message\" key={threadId}>\n                <div className=\"Message-meta\">\n                  { profileIds.map(profileId => (\n                    <CsProfileLink\n                      id={profileId}\n                      key={profileId}\n                    />\n                  )) }\n                  { thread?.updated_at && (\n                    <span className=\"Message-date\">{formatDate(thread.updated_at)}</span>\n                  ) }\n                </div>\n                { hasMessages && isThreadOpen && (\n                  <div\n                    className=\"Message-thread\"\n                    dangerouslySetInnerHTML={{ __html: marked(latestMessage) }}\n                  />\n                ) }\n                { hasMessages && !isThreadOpen && (\n                  <>\n                    { latestMessage && <div\n                      className=\"Message-preview\"\n                      dangerouslySetInnerHTML={{ __html: marked(latestMessage) }}\n                    /> }\n                    <button className=\"Message-read\" onClick={ setOpenThread(threadId) }>\n                      Read all\n                    </button>\n                  </>\n                ) }\n\n                { !hasMessages && <p className=\"Message-thread\">Empty message.</p> }\n              </div>\n            );\n          })\n        ) : 'No messages. :-(' }\n      </Content>\n    </Section>\n  );\n}\n\nexport default Messages;\n","import React from 'react'\nimport JsonTree from 'react-json-tree';\n\nimport { Section, Heading } from './components';\n\nfunction Raw({json}) {\n  return (\n    <Section>\n      <Heading>Raw profile export</Heading>\n      <JsonTree data={json} />\n    </Section>\n  );\n}\n\nexport default Raw;\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport marked from 'marked';\n\nimport './References.scss';\nimport { formatDate } from './utils';\nimport { Section, Heading, Content, CsProfileName, Tabs } from './components';\n\n/**\n * Count how many certain type references there are in array\n *\n * @param  {Array} references Array of references\n * @param  {String} experience \"positive\", \"neutral\" or \"negative\"\n * @return {Int} Total count\n */\nfunction countReferences(references, experience) {\n  if (!references || references.length === 0) {\n    return 0;\n  }\n\n  return references.filter((reference) => reference.experience === experience).length;\n}\n\nfunction referenceTypeLabel(type, isFromMe) {\n  switch (type) {\n    case 'surf':\n      return isFromMe ? 'To surfer' : 'From surfer';\n    case 'host':\n      return isFromMe ? 'To host' : 'From host';\n    default:\n      return isFromMe ? 'To member' : 'From member';\n  }\n}\n\nfunction experienceLabel(experience) {\n  switch (experience) {\n    case 'positive':\n      return 'Positive'\n    case 'negative':\n      return 'Negative';\n    case 'neutral':\n      return 'Neutral';\n    case 'did_not_meet':\n      return 'Did not meet';\n    default:\n      return experience;\n  }\n}\n\nfunction sortReferences(referernces) {\n  return referernces.sort(function(a, b) {\n    var dateA = a.created_at;\n    var dateB = b.created_at;\n    if (dateA < dateB) {\n      return -1;\n    }\n    if (dateA > dateB) {\n      return 1;\n    }\n\n    // must be equal\n    return 0;\n  });\n}\n\nfunction ReferencesList({list, userId, names}) {\n  return list.map((reference) => {\n    const {\n      body,\n      created_at,\n      creator_id,\n      experience,\n      recipient_id,\n      reference_type,\n      response_body,\n      response_created_at,\n    } = reference;\n    const isFromMe = creator_id === userId;\n    const profileId = isFromMe ? recipient_id : creator_id;\n\n    return (\n      <div\n        className=\"Profile-reference\"\n        key={ `${creator_id}-${recipient_id}-${created_at}` }\n      >\n        <p className=\"Profile-reference-meta\">\n          { isFromMe\n            ? referenceTypeLabel(reference_type, isFromMe)\n            : (\n              <>\n                <CsProfileName\n                  className=\"Profile-reference-type\"\n                  names={ names }\n                  id={profileId}\n                  alt={ referenceTypeLabel(reference_type) }\n                  append={ (\n                    <>\n                      { reference_type === 'host' && '(host)' }\n                      { reference_type === 'surf' && '(surfer)' }\n                    </>\n                  ) }\n                />\n              </>\n            )\n          }\n          { experience && (\n            <strong className={`Profile-reference-experience Profile-reference-experience-${experience}`}>\n              { experience === 'positive' && '★ ' }\n              { experienceLabel(experience) }\n            </strong>\n          ) }\n          { created_at && (\n            <span className=\"Profile-reference-date\">\n              { formatDate(created_at) }\n            </span>\n          ) }\n        </p>\n        { body && (\n          <p>\n            <span dangerouslySetInnerHTML={{ __html: marked(body) }} />\n          </p>\n        ) }\n        { response_body && (\n          <div className=\"Profile-reference-response\">\n            <p>\n              <strong>Response</strong>\n              { response_created_at && (\n                <span className=\"Profile-reference-date\">\n                  { ` ${formatDate(response_created_at)}` }\n                </span>\n              ) }\n            </p>\n            <p>\n              <span dangerouslySetInnerHTML={{ __html: marked(response_body) }} />\n            </p>\n          </div>\n        ) }\n      </div>\n    );\n  });\n}\n\nfunction References({references, userId, names}) {\n  const writtenReferences = sortReferences(references?.written_references ?? []);\n  const receivedReferences = sortReferences(references?.received_references ?? []);\n\n  return (\n    <Router>\n      <Section>\n        <Heading>References</Heading>\n        <Content>\n          <p>\n            { writtenReferences.length\n              ? (\n                <>\n                  <strong>{ `${writtenReferences.length} written: ` }</strong>\n                  { `${countReferences(writtenReferences, 'positive')} positive, ` }\n                  { `${countReferences(writtenReferences, 'neutral')} neutral, and ` }\n                  { `${countReferences(writtenReferences, 'negative')} negative.` }\n                </>\n              )\n              : `You didn't write references`\n            }\n          </p>\n          <p>\n            { receivedReferences.length\n              ? (\n                <>\n                  <strong>{ `${receivedReferences.length} received: ` }</strong>\n                  { `${countReferences(receivedReferences, 'positive')} positive, ` }\n                  { `${countReferences(receivedReferences, 'neutral')} neutral, and ` }\n                  { `${countReferences(receivedReferences, 'negative')} negative.` }\n                </>\n              )\n              : `You didn't receive references`\n            }\n          </p>\n\n          <Tabs routes={ [\n            { route: '/references', label: 'Received references' },\n            { route: '/references/written', label: 'Written references' },\n          ] } />\n\n          <Switch>\n            <Route exact path=\"/references\">\n              <h3>Received references</h3>\n              <ReferencesList\n                list={receivedReferences}\n                names={names}\n                userId={userId}\n              />\n            </Route>\n            <Route path=\"/references/written\">\n              <h3>Written references</h3>\n              <ReferencesList\n                list={writtenReferences}\n                names={names}\n                userId={userId}\n              />\n            </Route>\n          </Switch>\n        </Content>\n      </Section>\n    </Router>\n  );\n}\n\nexport default References;\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport './Profile.scss';\nimport { formatDate } from './utils';\nimport { Section, CsProfileLink, Tabs } from './components';\nimport AboutMe from './AboutMe';\nimport Friends from './Friends';\nimport Images from './Images';\nimport Messages from './Messages';\nimport Raw from './Raw';\nimport References from './References';\nimport TrustrootsTree from './trustroots-tree.svg';\n\nfunction Profile({fileDate, images, names, profile }) {\n  const { user_data: user, interests, references, friends, messages } = profile;\n\n  const referencesCount = (references?.written_references?.length ?? 0) + (references?.received_references?.length ?? 0);\n  const friendsCount = friends?.friends?.length ?? 0;\n  // const messagesCount = messages?.messages?.length ?? 0;\n  const imagesCount = images?.length ?? 0;\n  const routes = [\n    { route: '/', label: 'About me' },\n    { route: '/references', label: 'References', count: referencesCount },\n    { route: '/friends', label: 'Friends', count: friendsCount },\n    // { route: '/messages', label: 'Messages', count: messagesCount },\n    { route: '/images', label: 'Images', count: imagesCount },\n    { route: '/raw', label: 'Raw' }\n  ];\n\n  return (\n    <Router>\n      <div className=\"Profile\">\n        <div className=\"Profile-header\">\n          <p>\n            <em>\n              <CsProfileLink id={user?.id}>Your Couchsurfing.com profile</CsProfileLink>\n              { fileDate && ` as of ${ formatDate(fileDate) }` }\n            </em>\n            <a\n              href=\"/\"\n              className=\"Profile-clear\"\n              onClick={ () => window.sessionStorage.clear() }\n            >\n              Clear out the profile\n            </a>\n          </p>\n          <h1>\n            { user?.profile?.first_name && `${user.profile.first_name} ` }\n            { user?.profile?.last_name && `${user.profile.last_name} ` }\n            { user?.username && `(${user.username})` }\n          </h1>\n          { user?.profile?.occupation && <h3>{ user.profile.occupation }</h3> }\n        </div>\n\n        <Section>\n          <Tabs routes={ routes } />\n        </Section>\n\n        <Switch>\n          <Route exact path=\"/\">\n            <AboutMe user={ user } interests={ interests } />\n          </Route>\n          <Route path=\"/references\">\n            <References names={ names } references={ references } userId={ user?.id } />\n          </Route>\n          <Route path=\"/friends\">\n            <Friends names={ names } friends={ friends?.friends || [] } />\n          </Route>\n          <Route path=\"/messages\">\n            <Messages messages={ messages?.messages || [] } userId={ user?.id } />\n          </Route>\n          <Route path=\"/images\">\n            <Images images={ images } />\n          </Route>\n          <Route path=\"/raw\">\n            <Raw json={ profile } />\n          </Route>\n        </Switch>\n\n        <div className=\"promo\">\n          <a href=\"https://www.trustroots.org/?ref=couchspinner\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <img src={TrustrootsTree} className=\"tr-logo\" alt=\"Trustroots\" /><br />\n            Join Trustroots.org<br />\n            Travellers hospitality community.\n          </a>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default Profile;\n","import React, {useCallback, useState, useEffect, createRef} from 'react';\nimport {useDropzone} from 'react-dropzone';\nimport jszip from 'jszip';\nimport classnames from 'classnames';\n\nimport './App.scss';\nimport About from './About';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { testStorage } from './utils';\nimport { STORAGE_PREFIX } from './constants';\n// import example from './example-profile.json';\nconst EXAMPLE_PROFILE = false;\n\nasync function getJsonFromZip(zip) {\n  const files = zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && zipEntry.name.split('.').pop() === 'json';\n  });\n\n  if (!files.length) {\n    return false;\n  }\n\n  const jsonString = await zip.file(files[0].name).async('string');\n\n  try {\n    const json = JSON.parse(jsonString);\n    return json;\n  } catch {\n    return false;\n  }\n}\n\nasync function getImagesFromZip(zip) {\n  const files =  zip.filter((relativePath, zipEntry) => {\n    return !zipEntry.dir && ['jpg', 'gif', 'png'].includes(zipEntry.name.split('.').pop());\n  });\n\n  const imageProcessor = files.map(async (file) => {\n    const blob = await zip.file(file.name).async('blob');\n    const urlCreator = window.URL || window.webkitURL;\n    const blobUrl = urlCreator.createObjectURL(blob);\n\n    return {\n      blobUrl,\n      id: file.name,\n    };\n  });\n\n  const images = await Promise.all(imageProcessor);\n\n  return images;\n}\n\nasync function extractZip(file) {\n  const zip = await jszip.loadAsync(file);\n  const json = await getJsonFromZip(zip);\n  const images = await getImagesFromZip(zip);\n\n  return {\n    images,\n    json,\n  };\n}\n\nfunction getNamesFromJson(json) {\n  const names = new Map();\n\n  const collectName = visit => {\n    const person = visit?.surfer || visit?.host || {};\n    const username = person?.username;\n    const id = person?.profile?.id;\n    const displayName = person?.profile?.display_name;\n    names.set(id, { displayName, username });\n  };\n\n  if (json?.couch_visits?.host_couch_visits) {\n    json.couch_visits.host_couch_visits.forEach(collectName);\n  }\n\n  if (json?.couch_visits?.surfer_couch_visits) {\n    json.couch_visits.surfer_couch_visits.forEach(collectName);\n  }\n\n  return names;\n}\n\nfunction setCacheValue(key, value) {\n  try {\n    window.sessionStorage.setItem(`${STORAGE_PREFIX}_${key}`, value);\n  } catch(error) {\n    console.error(error);\n  }\n}\n\nfunction App() {\n  const isStorageAvailable = testStorage('sessionStorage');\n\n  // Re-hydrade previous cache\n  const cachedFileDate = isStorageAvailable && window.sessionStorage.getItem(`${STORAGE_PREFIX}_file_date`);\n  const cachedProfile = isStorageAvailable && JSON.parse(window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile`));\n  const cachedProfileImages = isStorageAvailable && JSON.parse(window.sessionStorage.getItem(`${STORAGE_PREFIX}_profile_images`));\n  const cachedNames = cachedProfile ? getNamesFromJson(cachedProfile) : new Map();\n\n  const [profile, setProfile] = useState(cachedProfile || EXAMPLE_PROFILE);\n  const [profileImages, setProfileImages] = useState(cachedProfileImages || []);\n  const [names, setNames] = useState(cachedNames);\n  const [fileDate, setFileDate] = useState(cachedFileDate || false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const ref = createRef();\n\n  // Store for the browser session — gets cleaared out when closing tab but not on page refresh\n  useEffect(() => {\n    if(isStorageAvailable) {\n      setCacheValue('file_date', fileDate);\n      setCacheValue('profile_images', JSON.stringify(profileImages));\n      setCacheValue('profile', JSON.stringify(profile));\n    }\n  }, [isStorageAvailable, profile, profileImages, fileDate]);\n\n  // On uploading file(s)\n  const onDrop = useCallback(async acceptedFiles => {\n    setIsProcessing(true);\n\n    if (acceptedFiles.length !== 1) {\n      setIsProcessing(false);\n      return alert('Just one file please.');\n    }\n\n    const file = acceptedFiles[0];\n\n    if (!['application/zip', 'application/json'].includes(file.type)) {\n      setIsProcessing(false);\n      return alert('Please drop either the zip file or json file.\\n\\nE.g. \"couchsurfing-export-123456-202005200751.zip\", or \"123456-202005200751.json\"');\n    }\n\n    setFileDate(file.lastModifiedDate);\n\n    if (file.type === 'application/zip') {\n      const { json, images } = await extractZip(file);\n      const names = getNamesFromJson(json);\n      setProfile(json);\n      setNames(names);\n      setProfileImages(images);\n    } else if (file.type === 'application/json') {\n      const jsonProfile = await file.text();\n      try {\n        const json = JSON.parse(jsonProfile);\n        const names = getNamesFromJson(json);\n        setProfile(json);\n        setNames(names);\n      } catch {\n        alert('File is little too funky for us to understand... 😥');\n      }\n    }\n\n    setIsProcessing(false);\n  }, []);\n\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop});\n\n  return (\n    <div className={ classnames( 'App', { 'is-processing': isProcessing } ) }>\n      { profile\n        ? <Profile\n            fileDate={ fileDate }\n            images={ profileImages }\n            names={ names }\n            profile={ profile }\n          />\n        : (\n          <>\n            <div className={ classnames( 'drop-container', { 'is-dropping': isDragActive } ) } {...getRootProps()}>\n              <input {...getInputProps() } />\n              <Intro aboutRef={ ref }/>\n            </div>\n            <About ref={ ref }/>\n          </>\n        )\n      }\n    </div>\n  );\n}\n\nexport default App;\n","export const STORAGE_PREFIX = 'couchspinner';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/sofa.ba454e2c.svg\";","module.exports = __webpack_public_path__ + \"static/media/trustroots-tree.19b96bca.svg\";"],"sourceRoot":""}